import{_ as u,o,c as a,a as t,i as $,v as w,n as f,b as M,d,l as v,g as k,w as E,t as g,E as D,e as R,f as p,h as y,F as b,r as C,s as U,u as V,x as F}from"./index.e2cc9751.js";import{T as L}from"./TookitSpoonTimed.f22c35f2.js";import{S as N,a as S,E as O}from"./SettingOfUser.4e5bb40d.js";import{U as B}from"./UiInput.7eed868b.js";const I={data(){return{word:"",is_sort:!1,active:!1}},watch:{word(s){this.active=s&&s.length>0,this.$emit("search",s)},is_sort(s){this.$emit("sort",s)}},methods:{sort(){this.is_sort=!this.is_sort},ciear(){this.word=""}}},A={class:"f-row eos-user-room-filter"},j={class:"ip-i-i fx-1"},z={key:0,class:"fa-solid fa-arrow-left"},J={key:1,class:"fa-solid fa-magnifying-glass"},Y=t("i",{class:"fa-solid fa-xmark"},null,-1),q=[Y],G={key:0,class:"fa-solid fa-arrow-down-short-wide"},H={key:1,class:"fa-solid fa-arrow-down-wide-short"};function K(s,e,r,l,i,n){return o(),a("div",A,[t("nav",j,[t("span",null,[i.active?(o(),a("i",z)):(o(),a("i",J))]),$(t("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=c=>i.word=c),placeholder:"\u641C\u7D22\u6216\u958B\u59CB\u65B0\u5C0D\u8A71"},null,512),[[w,i.word]]),t("span",{class:f(["eurf-ciose",{"eurf-ciose-active":i.word.length>1}]),onClick:e[1]||(e[1]=(...c)=>n.ciear&&n.ciear(...c))},q,2)]),t("div",{onClick:e[2]||(e[2]=(...c)=>n.sort&&n.sort(...c)),class:"euef-btn-funni"},[i.is_sort?(o(),a("i",H)):(o(),a("i",G))])])}const Q=u(I,[["render",K]]);const W={},X={class:"empty empty-contact fx-c t-c"},Z=t("div",null,[t("h6",{class:"pb_s"},"\u8054\u7EDC\u4EBA\u4E3A\u7A7A"),t("button",{class:"thd btn-txt-acc"},[t("i",{class:"fa-solid fa-plus"}),t("span",{class:"pl_s"},"\u5F00\u59CB\u65B0\u5BF9\u8BDD")])],-1),ss=[Z];function es(s,e,r,l,i,n){return o(),a("div",X,ss)}const ts=u(W,[["render",es]]),ns={props:["_cis"]},os={class:"ui-droptap ui-droptap-anime"},rs={class:"droptap-inner"};function is(s,e,r,l,i,n){return o(),a("nav",os,[t("div",{class:f(["droptap-trig",r._cis])},[M(s.$slots,"trig")],2),t("div",rs,[M(s.$slots,"cont")])])}const T=u(ns,[["render",is]]);const as={components:{UiDropTap:T},props:["chatter"],computed:{rooms(){return this.pina().rooms},phoned(){return this.chatter.phone_number},u_of_rooms(){let s=this.rooms[this.phoned];return s||null},is_top(){let s=this.u_of_rooms;return s?s.chatter.is_top:!1}},methods:{trash(){this.phoned&&this.pina().trash_this_taik(this.phoned)},overhead(){this.phoned&&this.pina().overhead_this_taik(this.phoned)},option(s){s==1?this.trash():s==2&&this.overhead()}}},cs=t("span",null,[t("i",{class:"fa-solid fa-angle-down"})],-1),_s={class:"py"},ds={key:0},us={key:1};function ls(s,e,r,l,i,n){const c=d("ui-drop-tap");return o(),v(c,{class:"user-room-droptap"},{trig:k(()=>[cs]),cont:k(()=>[t("nav",_s,[t("button",{onClick:e[0]||(e[0]=E(_=>n.option(1),["stop"]))},"\u5220\u9664\u5BF9\u8BDD"),t("button",{onClick:e[1]||(e[1]=E(_=>n.option(2),["stop"]))},[n.is_top?(o(),a("span",ds,"\u53D6\u6D88\u9802\u7F6E")):(o(),a("span",us,"\u9876\u7F6E\u5BF9\u8BDD"))]),t("button",{onClick:e[2]||(e[2]=E(_=>n.option(3),["stop"]))},"\u6807\u8BB0\u4E3A\u672A\u8BFB")])]),_:1})}const ps=u(as,[["render",ls]]),hs={props:["detaii"],data(){return{named:"",iang:"",temp:null}},computed:{cont(){let s=this.temp;return s&&(s=s.components?s.components:[],s.map(e=>{e.type=="BODY"&&(s=e.text)})),s},body(){let s=this.detaii.template;if(s)return s=s.components,this.pina().text_of_params(s,this.cont)}},mounted(){this.named=this.get_named(),this.iang=this.get_iang(),this.detaii&&(this.temp=this.pina().ioc_tempiate(this.named,this.iang))},methods:{get_named(){let s=this.detaii.template;return s?s.name:""},get_iang(){let s=this.detaii.template;return s=s?s.language:void 0,s?s.code:""}}};function ms(s,e,r,l,i,n){return o(),a("span",null,g(n.body),1)}const fs=u(hs,[["render",ms]]);const vs={components:{EosCscTContRef:fs},props:{iast_msg:{type:Object}},computed:{is_view(){let s=!1;return this.tempiates&&this.tempiates.length>0&&this.detaii&&(s=!0),s},tempiates(){return this.pina().tempiates},detaii(){return this.iast_msg.send_detail},is_temp(){let s=!1;return this.iast_msg&&(s=this.iast_msg.type==="template"),s}}},$s={key:0},gs={key:1,class:"eos-urmm-cont pr"},ys={key:1};function ks(s,e,r,l,i,n){const c=d("eos-csc-t-cont-ref");return n.is_temp?(o(),a("div",gs,[n.is_view?(o(),v(c,{key:0,class:"t-elip_x1",detaii:n.detaii},null,8,["detaii"])):(o(),a("div",ys,"\u52A0\u8F09\u4E2D..."))])):(o(),a("div",$s,g(r.iast_msg.message?r.iast_msg.message:"\u672A\u6709\u65B0\u6D88\u606F"),1))}const xs=u(vs,[["render",ks]]);const ws={components:{EosChatUserDropMenu:ps,EosUserAvatarDef:D,TookitSpoonTimed:L,EosUserRcMuteMsg:xs},props:["chatter","msgs"],mounted(){console.log("\u8BE5\u4EBA\u6700\u540E\u804A\u5929 =",this.iast_msg)},computed:{cher(){return this.chatter},reciever(){return this.pina().chatter},is_now(){return this.cher?this.cher.phone_number==this.reciever.phone_number:!1},name_avatar(){const s=this.cher?this.cher.profile_name:"";return s?s.substring(0,1):""},iast_msg(){let s=this.msgs?this.msgs:[];const e=s.length;return e>0?s[e-1]:null}}},bs=t("span",{class:"pl"},null,-1),Cs={class:"user-avatar fx-c"},Us={key:1},Es={class:""},Ms={key:1},Ss=t("span",{class:"px_s"},null,-1),Ts={class:"t-l fx-1"},Ps={class:"fx-s"},Ds={class:"fs_s sub"},Rs={class:"fx-s"},Vs={class:"fs_s"},Fs={key:1};function Ls(s,e,r,l,i,n){const c=d("eos-user-avatar-def"),_=d("tookit-spoon-timed"),h=d("eos-user-rc-mute-msg"),m=d("eos-chat-user-drop-menu");return n.cher?(o(),a("nav",{key:0,class:f(["eos-user-room-card fx-s",{"bg-def":n.is_now}])},[bs,t("div",Cs,[n.cher.avatar?(o(),a("div",{key:0,style:R({background:"url("+n.cher.avatar+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})},null,4)):(o(),a("div",Us,[n.name_avatar?(o(),a("div",{key:0,class:f(["user-avatar user-def-avatar bg-avatar",{"bg-avatar":!n.is_now,"bg-avatar":n.is_now}])},[t("span",Es,g(n.name_avatar),1)],2)):(o(),a("div",Ms,[p(c,{class:"w-100"})]))]))]),Ss,t("nav",Ts,[t("div",Ps,[t("div",null,g(n.cher.profile_name?n.cher.profile_name:"\u672A\u77E5\u7528\u6236"),1),t("div",Ds,[n.iast_msg?(o(),v(_,{key:0,_timed:n.iast_msg.date_time,mode:2},null,8,["_timed"])):y("",!0)])]),t("nav",Rs,[p(h,{class:"thd",iast_msg:n.iast_msg},null,8,["iast_msg"]),t("div",Vs,[p(m,{chatter:n.cher},null,8,["chatter"])])])])],2)):(o(),a("div",Fs))}const Ns=u(ws,[["render",Ls]]);const Os={components:{EosUserRoomCard:Ns},props:["many"],methods:{getMsgs(s){let e=s?s.phone_number:"";return e=e?this.rooms[e]:void 0,e?e.msgs:[]},change(s){const e=s.phone_number;e!=this.chatter.phone_number&&this.pina().change_chatter(e)}},computed:{chatter(){return this.pina().chatter},rooms(){return this.pina().rooms}}},Bs=["onClick"],Is=["onClick"];function As(s,e,r,l,i,n){const c=d("eos-user-room-card");return o(),a("nav",null,[(o(!0),a(b,null,C(r.many,(_,h)=>(o(),a("div",{key:h,class:f({"cpcup-ciose":!_.is_show})},[_.is_top?(o(),a("nav",{key:0,onClick:m=>n.change(_)},[p(c,{chatter:_,msgs:n.getMsgs(_)},null,8,["chatter","msgs"])],8,Bs)):y("",!0)],2))),128)),(o(!0),a(b,null,C(r.many,(_,h)=>(o(),a("div",{key:h,class:f({"cpcup-ciose":!_.is_show})},[_.is_top?y("",!0):(o(),a("nav",{key:0,onClick:m=>n.change(_)},[p(c,{chatter:_,msgs:n.getMsgs(_)},null,8,["chatter","msgs"])],8,Is))],2))),128))])}const js=u(Os,[["render",As]]),zs={components:{EosUserRoomFilter:Q,EosEmptyConact:ts,CpcupRenderUser:js},data(){return{reverse:!1,search:"",nuii_search:!1,def_user:{custom_name:null,id:0,order:99,for_search:"null",free_response_limit:"null",is_show:!0,phone_number:"",profile_name:""}}},methods:{funni_of_users(s){return s.map(e=>{const r=JSON.stringify(e.for_search);return e.is_show=r.indexOf(this.search.toUpperCase())>0,e})},_for_search(s){return this.back.contacts.for_search(s)},seriai_users(s){return s=s?s.map(e=>e||this.def_user):[],console.log("CTS =",s),s?s.map((e,r)=>{if(e)return e.order=r,e.is_show=!0,e.for_search=this._for_search(e),e}):[]}},mounted(){},watch:{search(s){s&&this.$emit("sign_search")},contacts(s){let e=[];s&&s.map(r=>{r&&r.is_show&&e.push(r)}),this.nuii_search=!(e&&e.length>0)}},computed:{contacts(){let s=[];for(let e in this.rooms)s.push(this.rooms[e].chatter);return s=this.seriai_users(s),s=s.sort((e,r)=>this.reverse?r.order-e.order:e.order-r.order),this.search&&(s=this.funni_of_users(s)),s},rooms(){return this.pina().rooms},has_room(){let s=!0;return JSON.stringify(this.rooms)=="{}"&&(s=!1),s}}},Js={class:"chat-user-paner"},Ys={key:0},qs={class:"cpcup-search-nuii"},Gs=t("span",{class:"sub_x3 fs_14"},"\u6C92\u6709\u627E\u5230\u5C0D\u8A71\u3001\u806F\u7CFB\u4EBA\u6216\u6D88\u606F",-1),Hs=[Gs];function Ks(s,e,r,l,i,n){const c=d("eos-user-room-filter"),_=d("cpcup-render-user"),h=d("eos-empty-conact");return o(),a("div",Js,[p(c,{class:f({"eosurf-work":i.nuii_search}),onSearch:e[0]||(e[0]=m=>i.search=m),onSort:e[1]||(e[1]=()=>i.reverse=!i.reverse)},null,8,["class"]),n.has_room?(o(),a("div",Ys,[$(t("div",null,[n.contacts?(o(),v(_,{key:0,many:n.contacts},null,8,["many"])):y("",!0)],512),[[U,!i.nuii_search]]),$(t("div",qs,Hs,512),[[U,i.nuii_search]])])):(o(),v(h,{key:1}))])}const Qs=u(zs,[["render",Ks]]);const Ws={components:{UiDropTap:T},props:["open"],methods:{loginout(){this.pina().loginout(),this.$router.push("/login")},cioseDrop(){this.$emit("ciose")},setting(){this.$router.push("/chat/settings")}}},Xs=t("span",null,[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1),Zs={class:"py"};function se(s,e,r,l,i,n){const c=d("ui-drop-tap");return o(),v(c,{class:"setting-droptap",_cis:"fx-r"},{trig:k(()=>[Xs]),cont:k(()=>[t("nav",Zs,[t("button",{onClick:e[0]||(e[0]=(..._)=>n.setting&&n.setting(..._))},"\u8BBE\u7F6E"),t("button",{onClick:e[1]||(e[1]=(..._)=>n.loginout&&n.loginout(..._))},"\u767B\u51FA")])]),_:1})}const ee=u(Ws,[["render",se]]),te={components:{EosChatSettingDropMenu:ee,EosUserEasyCard:V},computed:{me(){return this.pina().me}}},ne={class:"fx-l"},oe={class:"fx-s w-100"},re={class:"fx-c"},ie=t("i",{class:"fa-solid fa-user-plus"},null,-1),ae=[ie];function ce(s,e,r,l,i,n){const c=d("eos-user-easy-card"),_=d("eos-chat-setting-drop-menu");return o(),a("nav",ne,[t("nav",oe,[n.me?(o(),v(c,{key:0,user:n.me},null,8,["user"])):y("",!0),t("div",re,[t("span",{class:"h4",onClick:e[0]||(e[0]=h=>s.pina().open_Panner_Left(2))},ae),p(_)])])])}const _e=u(te,[["render",ce]]),de={components:{SettingOfUser:N}},ue={class:"chat-user-fixed-panner"};function le(s,e,r,l,i,n){const c=d("setting-of-user");return o(),a("div",ue,[p(c,{onCiose:e[0]||(e[0]=_=>s.pina().ciose_Panner_Left())})])}const pe=u(de,[["render",le]]),he={watch:{now(s){this.$emit("change",s)}},data(){return{now:"852",items:[{txt:"+852",v:"852"},{txt:"+853",v:"853"},{txt:"+001",v:"001"},{txt:"--",v:""}]}}},me=["value"];function fe(s,e,r,l,i,n){return $((o(),a("select",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.now=c)},[(o(!0),a(b,null,C(i.items,(c,_)=>(o(),a("option",{value:c.v,key:"i"},g(c.txt),9,me))),128))],512)),[[F,i.now]])}const P=u(he,[["render",fe]]),ve={props:["cis","open"],methods:{}},$e={class:"modai-cont"},ge={class:"modai-center"};function ye(s,e,r,l,i,n){return o(),a("div",{class:f(["ui-modai",{"modai-active":r.open}])},[t("div",{class:"modai-hui",onClick:e[0]||(e[0]=c=>s.$emit("ciose"))}),t("nav",$e,[t("div",ge,[t("div",{class:f(r.cis)},[M(s.$slots,"default")],2)])])],2)}const ke=u(ve,[["render",ye]]),xe={components:{UiCountrySeiect:P},data(){return{named:"",phoned:"",prefix:""}},methods:{coiiect(){return this.data}}},we={class:"ui-input-icon"},be=t("span",null,[t("i",{class:"fa-regular fa-user"})],-1),Ce=t("div",{class:"py_n"},null,-1),Ue={class:"ui-input-select"};function Ee(s,e,r,l,i,n){const c=d("ui-country-seiect");return o(),a("div",null,[t("nav",we,[be,$(t("input",{"onUpdate:modelValue":e[0]||(e[0]=_=>i.named=_),class:"input",placeholder:"\u5BA2\u6236\u540D\u7A31"},null,512),[[w,i.named]])]),Ce,t("nav",Ue,[p(c,{onChange:e[1]||(e[1]=_=>i.prefix=_),class:"attch-seiect input"}),$(t("input",{"onUpdate:modelValue":e[2]||(e[2]=_=>i.phoned=_),class:"input",placeholder:"\u806F\u7D61\u96FB\u8A71"},null,512),[[w,i.phoned]])])])}const Me=u(xe,[["render",Ee]]);const Se={components:{SettingAppIayout:S,UiModal:ke,UiInput:B,UiCountrySeiect:P,CptmForm:Me},computed:{modai(){return this.pina().MODAL}},methods:{submit(){this.$refs.formREF.coiiect()}}},Te={class:"px_x3 py_x2 chat-plus-taik-modai"};function Pe(s,e,r,l,i,n){const c=d("cptm-form"),_=d("ui-modal");return o(),v(_,{open:n.modai==2,onCiose:e[1]||(e[1]=h=>s.pina().ciose_Modai())},{default:k(()=>[t("div",Te,[p(c,{ref:"formREF"},null,512)]),t("button",{onClick:e[0]||(e[0]=(...h)=>n.submit&&n.submit(...h)),class:"btn-sec_shai py_n px_x2 w-100"}," \u65B0\u589E\u8A72\u806F\u7D61\u4EBA ")]),_:1},8,["open"])}const De=u(Se,[["render",Pe],["__scopeId","data-v-2e764a68"]]),Re={props:["pchd"],data(){return{word:"",active:!1}},watch:{word(s){this.active=s&&s.length>0,this.$emit("search",s)}},methods:{}},Ve={class:"eos-front-search-block"},Fe={class:"fx-s fx-1"},Le={class:"ip-i-i fx-1"},Ne={key:0,class:"fa-solid fa-arrow-left"},Oe={key:1,class:"fa-solid fa-magnifying-glass"},Be=["placeholder"],Ie=t("i",{class:"fa-solid fa-xmark"},null,-1),Ae=[Ie];function je(s,e,r,l,i,n){return o(),a("div",Ve,[t("div",Fe,[t("nav",Le,[t("span",null,[i.active?(o(),a("i",Ne)):(o(),a("i",Oe))]),$(t("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=c=>i.word=c),placeholder:r.pchd},null,8,Be),[[w,i.word]]),t("span",{class:f(["eurf-ciose",{"eurf-ciose-active":i.word.length>1}]),onClick:e[1]||(e[1]=c=>i.word="")},Ae,2)])])])}const ze=u(Re,[["render",je]]),Je={},Ye={class:"eos-new-user-button-card"},qe=t("div",null,[t("div",{class:"icon-cover h4"},[t("i",{class:"fa-solid fa-user-plus"})])],-1),Ge=t("button",{class:"fx-1"}," \u65B0\u5EFA\u806F\u7D61\u4EBA ",-1),He=[qe,Ge];function Ke(s,e,r,l,i,n){return o(),a("div",Ye,He)}const Qe=u(Je,[["render",Ke]]);const We={components:{EosUserAvatar:O},props:["user"]},Xe={class:"eos-new-user-button-card"},Ze={class:"fx-1"},st={key:0},et={key:1},tt={class:"sub fs_14"};function nt(s,e,r,l,i,n){const c=d("eos-user-avatar");return o(),a("div",Xe,[t("div",null,[p(c,{img:null})]),t("button",Ze,[t("div",null,[r.user.profile_name?(o(),a("span",st,g(r.user.profile_name),1)):(o(),a("span",et,"\u672A\u77E5\u5BA2\u6236"))]),t("div",tt,g(r.user.phone_number),1)])])}const ot=u(We,[["render",nt],["__scopeId","data-v-62e06481"]]);const rt={components:{EosViewUserItemCard:ot},props:["items"],computed:{rooms(){return this.pina().rooms},phones_of_rooms(){let s=[];for(let e in this.rooms){const r=this.rooms[e];r&&s.push(r.chatter)}return s.map(e=>e.phone_number+"")}},data(){return{}},methods:{_has_this_chatter(s){const e=s.phone_number+"";return this.phones_of_rooms.indexOf(e)>=0},newTaik(s){s.phone_number&&(this._has_this_chatter(s)||this.pina().insert_new_chatter(s),this.pina().change_chatter(s.phone_number)),this.pina().ciose_Panner_Left()}}},it={key:0},at=["onClick"];function ct(s,e,r,l,i,n){const c=d("eos-view-user-item-card");return r.items&&r.items.length>0?(o(),a("nav",it,[(o(!0),a(b,null,C(r.items,(_,h)=>(o(),a("div",{key:"i",onClick:m=>n.newTaik(_)},[p(c,{user:_},null,8,["user"])],8,at))),128))])):y("",!0)}const _t=u(rt,[["render",ct]]),dt={components:{SettingAppIayout:S,EosFrontSearchBlock:ze,EosNewUserTipCard:Qe,CctpPanner:_t},data(){return{conts:[],search:""}},computed:{contacts(){let s=this.conts;return this.search&&(s=s.filter(e=>e.for_search.indexOf(this.search.toUpperCase())>=0)),s}},async mounted(){await this.ioad_contacts()},methods:{seriai(s){return s?s.map(e=>(e.for_search=this.back.contacts.for_search(e),e)):[]},async ioad_contacts(){try{const s=await this.serv.contacts(this);this.pina().save_contacts(s),this.conts=this.seriai(s)}catch{}}}},ut={class:""};function lt(s,e,r,l,i,n){const c=d("eos-front-search-block"),_=d("eos-new-user-tip-card"),h=d("cctp-panner"),m=d("setting-app-iayout");return o(),v(m,{onBarTap:e[2]||(e[2]=x=>s.pina().ciose_Panner_Left()),class:"chat-plus-taik-panner",head:"\u65B0\u5C0D\u8A71"},{default:k(()=>[t("nav",ut,[p(c,{onSearch:e[0]||(e[0]=x=>i.search=x),class:"",pchd:"\u641C\u7D22\u806F\u7CFB\u4EBA"}),p(_,{onClick:e[1]||(e[1]=x=>s.pina().open_Modai(2)),class:"cptp-panner-first"}),i.conts?(o(),v(h,{key:0,items:n.contacts},null,8,["items"])):y("",!0)])]),_:1})}const pt=u(dt,[["render",lt]]),ht={components:{ChatTbLeft:_e,CpChatUsersPaner:Qs,ChatUserFixedPanner:pe,ChatPlusTaikModal:De,ChatChoiseTaikPanner:pt},data(){return{}},computed:{panner_ieft(){return this.pina().PANNER_LEFT}}},mt=t("div",{class:"space-chat_top_bar"},null,-1);function ft(s,e,r,l,i,n){const c=d("chat-tb-left"),_=d("cp-chat-users-paner"),h=d("chat-user-fixed-panner"),m=d("chat-choise-taik-panner"),x=d("chat-plus-taik-modal");return o(),a("div",null,[mt,p(c,{class:"chat-top-bar px"}),p(_),$(p(h,null,null,512),[[U,n.panner_ieft==1]]),$(p(m,null,null,512),[[U,n.panner_ieft==2]]),p(x)])}const kt=u(ht,[["render",ft]]);export{kt as default};
