import{_ as d,o,c as i,a as t,i as v,v as w,n as f,b as M,d as u,l as $,g as k,w as E,t as y,E as D,e as R,f as p,h as g,F as b,r as C,s as U,u as V,x as F}from"./index.d66d752a.js";import{T as L}from"./TookitSpoonTimed.3776d85c.js";import{S as N,a as S,E as O}from"./SettingOfUser.c1f65ae3.js";import{U as B}from"./UiInput.fbfe982e.js";const I={data(){return{word:"",is_sort:!1,active:!1}},watch:{word(e){this.active=e&&e.length>0,this.$emit("search",e)},is_sort(e){this.$emit("sort",e)}},methods:{sort(){this.is_sort=!this.is_sort},ciear(){this.word=""}}},A={class:"f-row eos-user-room-filter"},j={class:"ip-i-i fx-1"},z={key:0,class:"fa-solid fa-arrow-left"},J={key:1,class:"fa-solid fa-magnifying-glass"},q=t("i",{class:"fa-solid fa-xmark"},null,-1),G=[q],H={key:0,class:"fa-solid fa-arrow-down-short-wide"},K={key:1,class:"fa-solid fa-arrow-down-wide-short"};function Q(e,s,r,l,a,n){return o(),i("div",A,[t("nav",j,[t("span",null,[a.active?(o(),i("i",z)):(o(),i("i",J))]),v(t("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=c=>a.word=c),placeholder:"\u641C\u7D22\u6216\u958B\u59CB\u65B0\u5C0D\u8A71"},null,512),[[w,a.word]]),t("span",{class:f(["eurf-ciose",{"eurf-ciose-active":a.word.length>1}]),onClick:s[1]||(s[1]=(...c)=>n.ciear&&n.ciear(...c))},G,2)]),t("div",{onClick:s[2]||(s[2]=(...c)=>n.sort&&n.sort(...c)),class:"euef-btn-funni"},[a.is_sort?(o(),i("i",K)):(o(),i("i",H))])])}const W=d(I,[["render",Q]]);const X={},Y={class:"empty empty-contact fx-c t-c"},Z=t("div",null,[t("h6",{class:"pb_s"},"\u8054\u7EDC\u4EBA\u4E3A\u7A7A"),t("button",{class:"thd btn-txt-acc"},[t("i",{class:"fa-solid fa-plus"}),t("span",{class:"pl_s"},"\u5F00\u59CB\u65B0\u5BF9\u8BDD")])],-1),ss=[Z];function es(e,s,r,l,a,n){return o(),i("div",Y,ss)}const ts=d(X,[["render",es]]),ns={props:["_cis"]},os={class:"ui-droptap ui-droptap-anime"},rs={class:"droptap-inner"};function as(e,s,r,l,a,n){return o(),i("nav",os,[t("div",{class:f(["droptap-trig",r._cis])},[M(e.$slots,"trig")],2),t("div",rs,[M(e.$slots,"cont")])])}const T=d(ns,[["render",as]]);const is={components:{UiDropTap:T},props:["chatter"],computed:{rooms(){return this.pina().rooms},phoned(){return this.chatter.phone_number},u_of_rooms(){let e=this.rooms[this.phoned];return e||null},is_top(){let e=this.u_of_rooms;return e?e.chatter.is_top:!1}},methods:{trash(){this.phoned&&this.pina().trash_this_taik(this.phoned)},overhead(){this.phoned&&this.pina().overhead_this_taik(this.phoned)},option(e){e==1?this.trash():e==2&&this.overhead()}}},cs=t("span",null,[t("i",{class:"fa-solid fa-angle-down"})],-1),_s={class:"py"},us={key:0},ds={key:1};function ls(e,s,r,l,a,n){const c=u("ui-drop-tap");return o(),$(c,{class:"user-room-droptap"},{trig:k(()=>[cs]),cont:k(()=>[t("nav",_s,[t("button",{onClick:s[0]||(s[0]=E(_=>n.option(1),["stop"]))},"\u5220\u9664\u5BF9\u8BDD"),t("button",{onClick:s[1]||(s[1]=E(_=>n.option(2),["stop"]))},[n.is_top?(o(),i("span",us,"\u53D6\u6D88\u9802\u7F6E")):(o(),i("span",ds,"\u9876\u7F6E\u5BF9\u8BDD"))]),t("button",{onClick:s[2]||(s[2]=E(_=>n.option(3),["stop"]))},"\u6807\u8BB0\u4E3A\u672A\u8BFB")])]),_:1})}const ps=d(is,[["render",ls]]);const hs={props:{iast_msg:{type:Object}},computed:{msg(){return this.iast_msg?this.iast_msg.message:"\u672A\u6709\u65B0\u6D88\u606F"}}};function ms(e,s,r,l,a,n){return o(),i("div",null,y(n.msg),1)}const fs=d(hs,[["render",ms]]);const vs={components:{EosChatUserDropMenu:ps,EosUserAvatarDef:D,TookitSpoonTimed:L,EosUserRcMuteMsg:fs},props:["chatter","msgs"],mounted(){console.log("\u8BE5\u4EBA\u804A\u5929 =",this.iast_msg)},computed:{cher(){return this.chatter},reciever(){return this.pina().chatter},is_now(){return this.cher?this.cher.phone_number==this.reciever.phone_number:!1},name_avatar(){const e=this.cher?this.cher.profile_name:"";return e?e.substring(0,1):""},iast_msg(){let e=this.msgs?this.msgs:[];const s=e.length;return s>0?e[s-1]:null}}},$s=t("span",{class:"pl"},null,-1),gs={class:"user-avatar fx-c"},ks={key:1},ys={class:""},xs={key:1},ws=t("span",{class:"px_s"},null,-1),bs={class:"t-l fx-1"},Cs={class:"fx-s"},Us={class:"fs_s sub"},Es={class:"fx-s"},Ms={class:"fs_s"},Ss={key:1};function Ts(e,s,r,l,a,n){const c=u("eos-user-avatar-def"),_=u("tookit-spoon-timed"),h=u("eos-user-rc-mute-msg"),m=u("eos-chat-user-drop-menu");return n.cher?(o(),i("nav",{key:0,class:f(["eos-user-room-card fx-s",{"bg-def":n.is_now}])},[$s,t("div",gs,[n.cher.avatar?(o(),i("div",{key:0,style:R({background:"url("+n.cher.avatar+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})},null,4)):(o(),i("div",ks,[n.name_avatar?(o(),i("div",{key:0,class:f(["user-avatar user-def-avatar bg-avatar",{"bg-avatar":!n.is_now,"bg-avatar":n.is_now}])},[t("span",ys,y(n.name_avatar),1)],2)):(o(),i("div",xs,[p(c,{class:"w-100"})]))]))]),ws,t("nav",bs,[t("div",Cs,[t("div",null,y(n.cher.profile_name?n.cher.profile_name:"\u672A\u77E5\u7528\u6236"),1),t("div",Us,[n.iast_msg?(o(),$(_,{key:0,_timed:n.iast_msg.date_time,mode:2},null,8,["_timed"])):g("",!0)])]),t("nav",Es,[p(h,{class:"thd",iast_msg:n.iast_msg},null,8,["iast_msg"]),t("div",Ms,[p(m,{chatter:n.cher},null,8,["chatter"])])])])],2)):(o(),i("div",Ss))}const Ps=d(vs,[["render",Ts]]);const Ds={components:{EosUserRoomCard:Ps},props:["many"],methods:{getMsgs(e){let s=e?e.phone_number:"";return s=s?this.rooms[s]:void 0,s?s.msgs:[]},change(e){const s=e.phone_number;s!=this.chatter.phone_number&&this.pina().change_chatter(s)}},computed:{chatter(){return this.pina().chatter},rooms(){return this.pina().rooms}}},Rs=["onClick"],Vs=["onClick"];function Fs(e,s,r,l,a,n){const c=u("eos-user-room-card");return o(),i("nav",null,[(o(!0),i(b,null,C(r.many,(_,h)=>(o(),i("div",{key:h,class:f({"cpcup-ciose":!_.is_show})},[_.is_top?(o(),i("nav",{key:0,onClick:m=>n.change(_)},[p(c,{chatter:_,msgs:n.getMsgs(_)},null,8,["chatter","msgs"])],8,Rs)):g("",!0)],2))),128)),(o(!0),i(b,null,C(r.many,(_,h)=>(o(),i("div",{key:h,class:f({"cpcup-ciose":!_.is_show})},[_.is_top?g("",!0):(o(),i("nav",{key:0,onClick:m=>n.change(_)},[p(c,{chatter:_,msgs:n.getMsgs(_)},null,8,["chatter","msgs"])],8,Vs))],2))),128))])}const Ls=d(Ds,[["render",Fs]]),Ns={components:{EosUserRoomFilter:W,EosEmptyConact:ts,CpcupRenderUser:Ls},data(){return{reverse:!1,search:"",nuii_search:!1}},methods:{funni_of_users(e){return e.map(s=>{const r=JSON.stringify(s.for_search);return s.is_show=r.indexOf(this.search.toUpperCase())>0,s})},_for_search(e){return this.back.contacts.for_search(e)},seriai_users(e){return console.log("CTS =",e),e?e.map((s,r)=>{if(s)return s.order=r,s.is_show=!0,s.for_search=this._for_search(s),s}):[]}},mounted(){console.log("\u8054\u7EDC\u4EBA(CPchatuserpaner) =",this.contacts)},watch:{search(e){e&&this.$emit("sign_search")},contacts(e){let s=[];e&&e.map(r=>{r&&r.is_show&&s.push(r)}),this.nuii_search=!(s&&s.length>0)}},computed:{contacts(){let e=[];for(let s in this.rooms)e.push(this.rooms[s].chatter);return e=this.seriai_users(e),e=e.sort((s,r)=>this.reverse?r.order-s.order:s.order-r.order),this.search&&(e=this.funni_of_users(e)),e},rooms(){return this.pina().rooms},has_room(){let e=!0;return JSON.stringify(this.rooms)=="{}"&&(e=!1),e}}},Os={class:"chat-user-paner"},Bs={key:0},Is={class:"cpcup-search-nuii"},As=t("span",{class:"sub_x3 fs_14"},"\u6C92\u6709\u627E\u5230\u5C0D\u8A71\u3001\u806F\u7CFB\u4EBA\u6216\u6D88\u606F",-1),js=[As];function zs(e,s,r,l,a,n){const c=u("eos-user-room-filter"),_=u("cpcup-render-user"),h=u("eos-empty-conact");return o(),i("div",Os,[p(c,{class:f({"eosurf-work":a.nuii_search}),onSearch:s[0]||(s[0]=m=>a.search=m),onSort:s[1]||(s[1]=()=>a.reverse=!a.reverse)},null,8,["class"]),n.has_room?(o(),i("div",Bs,[v(t("div",null,[n.contacts?(o(),$(_,{key:0,many:n.contacts},null,8,["many"])):g("",!0)],512),[[U,!a.nuii_search]]),v(t("div",Is,js,512),[[U,a.nuii_search]])])):(o(),$(h,{key:1}))])}const Js=d(Ns,[["render",zs]]);const qs={components:{UiDropTap:T},props:["open"],methods:{loginout(){this.pina().loginout(),this.$router.push("/login")},cioseDrop(){this.$emit("ciose")},setting(){this.$router.push("/chat/settings")}}},Gs=t("span",null,[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1),Hs={class:"py"};function Ks(e,s,r,l,a,n){const c=u("ui-drop-tap");return o(),$(c,{class:"setting-droptap",_cis:"fx-r"},{trig:k(()=>[Gs]),cont:k(()=>[t("nav",Hs,[t("button",{onClick:s[0]||(s[0]=(..._)=>n.setting&&n.setting(..._))},"\u8BBE\u7F6E"),t("button",{onClick:s[1]||(s[1]=(..._)=>n.loginout&&n.loginout(..._))},"\u767B\u51FA")])]),_:1})}const Qs=d(qs,[["render",Ks]]),Ws={components:{EosChatSettingDropMenu:Qs,EosUserEasyCard:V},computed:{me(){return this.pina().me}}},Xs={class:"fx-l"},Ys={class:"fx-s w-100"},Zs={class:"fx-c"},se=t("i",{class:"fa-solid fa-user-plus"},null,-1),ee=[se];function te(e,s,r,l,a,n){const c=u("eos-user-easy-card"),_=u("eos-chat-setting-drop-menu");return o(),i("nav",Xs,[t("nav",Ys,[n.me?(o(),$(c,{key:0,user:n.me},null,8,["user"])):g("",!0),t("div",Zs,[t("span",{class:"h4",onClick:s[0]||(s[0]=h=>e.pina().open_Panner_Left(2))},ee),p(_)])])])}const ne=d(Ws,[["render",te]]),oe={components:{SettingOfUser:N}},re={class:"chat-user-fixed-panner"};function ae(e,s,r,l,a,n){const c=u("setting-of-user");return o(),i("div",re,[p(c,{onCiose:s[0]||(s[0]=_=>e.pina().ciose_Panner_Left())})])}const ie=d(oe,[["render",ae]]),ce={watch:{now(e){this.$emit("change",e)}},data(){return{now:"852",items:[{txt:"+852",v:"852"},{txt:"+853",v:"853"},{txt:"+001",v:"001"},{txt:"--",v:""}]}}},_e=["value"];function ue(e,s,r,l,a,n){return v((o(),i("select",{"onUpdate:modelValue":s[0]||(s[0]=c=>a.now=c)},[(o(!0),i(b,null,C(a.items,(c,_)=>(o(),i("option",{value:c.v,key:"i"},y(c.txt),9,_e))),128))],512)),[[F,a.now]])}const P=d(ce,[["render",ue]]),de={props:["cis","open"],methods:{}},le={class:"modai-cont"},pe={class:"modai-center"};function he(e,s,r,l,a,n){return o(),i("div",{class:f(["ui-modai",{"modai-active":r.open}])},[t("div",{class:"modai-hui",onClick:s[0]||(s[0]=c=>e.$emit("ciose"))}),t("nav",le,[t("div",pe,[t("div",{class:f(r.cis)},[M(e.$slots,"default")],2)])])],2)}const me=d(de,[["render",he]]),fe={components:{UiCountrySeiect:P},data(){return{named:"",phoned:"",prefix:""}},methods:{coiiect(){return this.data}}},ve={class:"ui-input-icon"},$e=t("span",null,[t("i",{class:"fa-regular fa-user"})],-1),ge=t("div",{class:"py_n"},null,-1),ke={class:"ui-input-select"};function ye(e,s,r,l,a,n){const c=u("ui-country-seiect");return o(),i("div",null,[t("nav",ve,[$e,v(t("input",{"onUpdate:modelValue":s[0]||(s[0]=_=>a.named=_),class:"input",placeholder:"\u5BA2\u6237\u540D\u79F0"},null,512),[[w,a.named]])]),ge,t("nav",ke,[p(c,{onChange:s[1]||(s[1]=_=>a.prefix=_),class:"attch-seiect input"}),v(t("input",{"onUpdate:modelValue":s[2]||(s[2]=_=>a.phoned=_),class:"input",placeholder:"\u8054\u7EDC\u7535\u8BDD"},null,512),[[w,a.phoned]])])])}const xe=d(fe,[["render",ye]]);const we={components:{SettingAppIayout:S,UiModal:me,UiInput:B,UiCountrySeiect:P,CptmForm:xe},computed:{modai(){return this.pina().MODAL}},methods:{submit(){this.$refs.formREF.coiiect()}}},be={class:"px_x3 py_x2 chat-plus-taik-modai"};function Ce(e,s,r,l,a,n){const c=u("cptm-form"),_=u("ui-modal");return o(),$(_,{open:n.modai==2,onCiose:s[1]||(s[1]=h=>e.pina().ciose_Modai())},{default:k(()=>[t("div",be,[p(c,{ref:"formREF"},null,512)]),t("button",{onClick:s[0]||(s[0]=(...h)=>n.submit&&n.submit(...h)),class:"btn-sec_shai py_n px_x2 w-100"}," \u65B0\u589E\u8A72\u806F\u7D61\u4EBA ")]),_:1},8,["open"])}const Ue=d(we,[["render",Ce],["__scopeId","data-v-2e764a68"]]),Ee={props:["pchd"],data(){return{word:"",active:!1}},watch:{word(e){this.active=e&&e.length>0,this.$emit("search",e)}},methods:{}},Me={class:"eos-front-search-block"},Se={class:"fx-s fx-1"},Te={class:"ip-i-i fx-1"},Pe={key:0,class:"fa-solid fa-arrow-left"},De={key:1,class:"fa-solid fa-magnifying-glass"},Re=["placeholder"],Ve=t("i",{class:"fa-solid fa-xmark"},null,-1),Fe=[Ve];function Le(e,s,r,l,a,n){return o(),i("div",Me,[t("div",Se,[t("nav",Te,[t("span",null,[a.active?(o(),i("i",Pe)):(o(),i("i",De))]),v(t("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=c=>a.word=c),placeholder:r.pchd},null,8,Re),[[w,a.word]]),t("span",{class:f(["eurf-ciose",{"eurf-ciose-active":a.word.length>1}]),onClick:s[1]||(s[1]=c=>a.word="")},Fe,2)])])])}const Ne=d(Ee,[["render",Le]]),Oe={},Be={class:"eos-new-user-button-card"},Ie=t("div",null,[t("div",{class:"icon-cover h4"},[t("i",{class:"fa-solid fa-user-plus"})])],-1),Ae=t("button",{class:"fx-1"}," \u65B0\u5EFA\u806F\u7D61\u4EBA ",-1),je=[Ie,Ae];function ze(e,s,r,l,a,n){return o(),i("div",Be,je)}const Je=d(Oe,[["render",ze]]);const qe={components:{EosUserAvatar:O},props:["user"]},Ge={class:"eos-new-user-button-card"},He={class:"fx-1"},Ke={key:0},Qe={key:1},We={class:"sub fs_14"};function Xe(e,s,r,l,a,n){const c=u("eos-user-avatar");return o(),i("div",Ge,[t("div",null,[p(c,{img:null})]),t("button",He,[t("div",null,[r.user.profile_name?(o(),i("span",Ke,y(r.user.profile_name),1)):(o(),i("span",Qe,"\u672A\u77E5\u5BA2\u6236"))]),t("div",We,y(r.user.phone_number),1)])])}const Ye=d(qe,[["render",Xe],["__scopeId","data-v-62e06481"]]);const Ze={components:{EosViewUserItemCard:Ye},props:["items"],computed:{rooms(){return this.pina().rooms},phones_of_rooms(){let e=[];for(let s in this.rooms){const r=this.rooms[s];r&&e.push(r.chatter)}return e.map(s=>s.phone_number+"")}},data(){return{}},methods:{_has_this_chatter(e){const s=e.phone_number+"";return this.phones_of_rooms.indexOf(s)>=0},newTaik(e){e.phone_number&&(this._has_this_chatter(e)||this.pina().insert_new_chatter(e),this.pina().change_chatter(e.phone_number)),this.pina().ciose_Panner_Left()}}},st={key:0},et=["onClick"];function tt(e,s,r,l,a,n){const c=u("eos-view-user-item-card");return r.items&&r.items.length>0?(o(),i("nav",st,[(o(!0),i(b,null,C(r.items,(_,h)=>(o(),i("div",{key:"i",onClick:m=>n.newTaik(_)},[p(c,{user:_},null,8,["user"])],8,et))),128))])):g("",!0)}const nt=d(Ze,[["render",tt]]),ot={components:{SettingAppIayout:S,EosFrontSearchBlock:Ne,EosNewUserTipCard:Je,CctpPanner:nt},data(){return{conts:[],search:""}},computed:{contacts(){let e=this.conts;return this.search&&(e=e.filter(s=>s.for_search.indexOf(this.search.toUpperCase())>=0)),e}},async mounted(){await this.ioad_contacts()},methods:{seriai(e){return e?e.map(s=>(s.for_search=this.back.contacts.for_search(s),s)):[]},async ioad_contacts(){try{const e=await this.serv.contacts(this);this.pina().save_contacts(e),this.conts=this.seriai(e)}catch{}}}},rt={class:""};function at(e,s,r,l,a,n){const c=u("eos-front-search-block"),_=u("eos-new-user-tip-card"),h=u("cctp-panner"),m=u("setting-app-iayout");return o(),$(m,{onBarTap:s[2]||(s[2]=x=>e.pina().ciose_Panner_Left()),class:"chat-plus-taik-panner",head:"\u65B0\u5C0D\u8A71"},{default:k(()=>[t("nav",rt,[p(c,{onSearch:s[0]||(s[0]=x=>a.search=x),class:"",pchd:"\u641C\u7D22\u806F\u7CFB\u4EBA"}),p(_,{onClick:s[1]||(s[1]=x=>e.pina().open_Modai(2)),class:"cptp-panner-first"}),a.conts?(o(),$(h,{key:0,items:n.contacts},null,8,["items"])):g("",!0)])]),_:1})}const it=d(ot,[["render",at]]),ct={components:{ChatTbLeft:ne,CpChatUsersPaner:Js,ChatUserFixedPanner:ie,ChatPlusTaikModal:Ue,ChatChoiseTaikPanner:it},data(){return{}},computed:{panner_ieft(){return this.pina().PANNER_LEFT}}},_t=t("div",{class:"space-chat_top_bar"},null,-1);function ut(e,s,r,l,a,n){const c=u("chat-tb-left"),_=u("cp-chat-users-paner"),h=u("chat-user-fixed-panner"),m=u("chat-choise-taik-panner"),x=u("chat-plus-taik-modal");return o(),i("div",null,[_t,p(c,{class:"chat-top-bar px"}),p(_),v(p(h,null,null,512),[[U,n.panner_ieft==1]]),v(p(m,null,null,512),[[U,n.panner_ieft==2]]),p(x)])}const mt=d(ct,[["render",ut]]);export{mt as default};
