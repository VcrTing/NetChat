import{_ as u,o,c as a,a as t,i as $,v as w,n as f,b as M,d,l as v,g as k,w as E,t as y,h as g,E as D,e as R,f as p,F as b,r as C,s as U,u as V,x as F}from"./index.d95b4363.js";import{T as L}from"./TookitSpoonTimed.5423f9cd.js";import{S as N,a as S,E as O}from"./SettingOfUser.b069c5ff.js";import{U as B}from"./UiInput.33c9acca.js";const I={data(){return{word:"",is_sort:!1,active:!1}},watch:{word(s){this.active=s&&s.length>0,this.$emit("search",s)},is_sort(s){this.$emit("sort",s)}},methods:{sort(){this.is_sort=!this.is_sort},ciear(){this.word=""}}},A={class:"f-row eos-user-room-filter"},j={class:"ip-i-i fx-1"},z={key:0,class:"fa-solid fa-arrow-left"},J={key:1,class:"fa-solid fa-magnifying-glass"},Y=t("i",{class:"fa-solid fa-xmark"},null,-1),q=[Y],G={key:0,class:"fa-solid fa-arrow-down-short-wide"},H={key:1,class:"fa-solid fa-arrow-down-wide-short"};function K(s,e,r,l,i,n){return o(),a("div",A,[t("nav",j,[t("span",null,[i.active?(o(),a("i",z)):(o(),a("i",J))]),$(t("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=c=>i.word=c),placeholder:"\u641C\u7D22\u6216\u958B\u59CB\u65B0\u5C0D\u8A71"},null,512),[[w,i.word]]),t("span",{class:f(["eurf-ciose",{"eurf-ciose-active":i.word.length>1}]),onClick:e[1]||(e[1]=(...c)=>n.ciear&&n.ciear(...c))},q,2)]),t("div",{onClick:e[2]||(e[2]=(...c)=>n.sort&&n.sort(...c)),class:"euef-btn-funni"},[i.is_sort?(o(),a("i",H)):(o(),a("i",G))])])}const Q=u(I,[["render",K]]);const W={},X={class:"empty empty-contact fx-c t-c"},Z=t("div",null,[t("h6",{class:"pb_s"},"\u8054\u7EDC\u4EBA\u4E3A\u7A7A"),t("button",{class:"thd btn-txt-acc"},[t("i",{class:"fa-solid fa-plus"}),t("span",{class:"pl_s"},"\u5F00\u59CB\u65B0\u5BF9\u8BDD")])],-1),ss=[Z];function es(s,e,r,l,i,n){return o(),a("div",X,ss)}const ts=u(W,[["render",es]]),ns={props:["_cis"]},os={class:"ui-droptap ui-droptap-anime"},rs={class:"droptap-inner"};function is(s,e,r,l,i,n){return o(),a("nav",os,[t("div",{class:f(["droptap-trig",r._cis])},[M(s.$slots,"trig")],2),t("div",rs,[M(s.$slots,"cont")])])}const T=u(ns,[["render",is]]);const as={components:{UiDropTap:T},props:["chatter"],computed:{rooms(){return this.pina().rooms},phoned(){return this.chatter.phone_number},u_of_rooms(){let s=this.rooms[this.phoned];return s||null},is_top(){let s=this.u_of_rooms;return s?s.chatter.is_top:!1}},methods:{trash(){this.phoned&&this.pina().trash_this_taik(this.phoned)},overhead(){this.phoned&&this.pina().overhead_this_taik(this.phoned)},option(s){s==1?this.trash():s==2&&this.overhead()}}},cs=t("span",null,[t("i",{class:"fa-solid fa-angle-down"})],-1),_s={class:"py"},ds={key:0},us={key:1};function ls(s,e,r,l,i,n){const c=d("ui-drop-tap");return o(),v(c,{class:"user-room-droptap"},{trig:k(()=>[cs]),cont:k(()=>[t("nav",_s,[t("button",{onClick:e[0]||(e[0]=E(_=>n.option(1),["stop"]))},"\u5220\u9664\u5BF9\u8BDD"),t("button",{onClick:e[1]||(e[1]=E(_=>n.option(2),["stop"]))},[n.is_top?(o(),a("span",ds,"\u53D6\u6D88\u9802\u7F6E")):(o(),a("span",us,"\u9876\u7F6E\u5BF9\u8BDD"))]),t("button",{onClick:e[2]||(e[2]=E(_=>n.option(3),["stop"]))},"\u6807\u8BB0\u4E3A\u672A\u8BFB")])]),_:1})}const ps=u(as,[["render",ls]]),hs={props:["detaii"],data(){return{named:"",iang:"",temp:null}},computed:{cont(){let s=this.temp;return s&&(s=s.components?s.components:[],s.map(e=>{e.type=="BODY"&&(s=e.text)})),s},body(){let s=this.detaii.template;if(s)return s=s.components,this.pina().text_of_params(s,this.cont)}},mounted(){this.named=this.get_named(),this.iang=this.get_iang(),this.detaii&&(this.temp=this.pina().ioc_tempiate(this.named,this.iang))},methods:{get_named(){let s=this.detaii.template;return s?s.name:""},get_iang(){let s=this.detaii.template;return s=s?s.language:void 0,s?s.code:""}}};function ms(s,e,r,l,i,n){return o(),a("span",null,y(n.body),1)}const fs=u(hs,[["render",ms]]);const vs={components:{EosCscTContRef:fs},props:{iast_msg:{type:Object}},computed:{tempiates(){return this.pina().tempiates},detaii(){return this.iast_msg.send_detail},is_temp(){let s=!1;return this.iast_msg&&(s=this.iast_msg.type==="template"),s}}},$s={key:0},gs={key:1,class:"eos-urmm-cont pr"};function ys(s,e,r,l,i,n){const c=d("eos-csc-t-cont-ref");return n.is_temp?(o(),a("div",gs,[n.detaii?(o(),v(c,{key:0,class:"t-elip_x1",detaii:n.detaii},null,8,["detaii"])):g("",!0)])):(o(),a("div",$s,y(r.iast_msg.message?r.iast_msg.message:"\u672A\u6709\u65B0\u6D88\u606F"),1))}const ks=u(vs,[["render",ys]]);const xs={components:{EosChatUserDropMenu:ps,EosUserAvatarDef:D,TookitSpoonTimed:L,EosUserRcMuteMsg:ks},props:["chatter","msgs"],mounted(){console.log("\u8BE5\u4EBA\u6700\u540E\u804A\u5929 =",this.iast_msg)},computed:{cher(){return this.chatter},reciever(){return this.pina().chatter},is_now(){return this.cher?this.cher.phone_number==this.reciever.phone_number:!1},name_avatar(){const s=this.cher?this.cher.profile_name:"";return s?s.substring(0,1):""},iast_msg(){let s=this.msgs?this.msgs:[];const e=s.length;return e>0?s[e-1]:null}}},ws=t("span",{class:"pl"},null,-1),bs={class:"user-avatar fx-c"},Cs={key:1},Us={class:""},Es={key:1},Ms=t("span",{class:"px_s"},null,-1),Ss={class:"t-l fx-1"},Ts={class:"fx-s"},Ps={class:"fs_s sub"},Ds={class:"fx-s"},Rs={class:"fs_s"},Vs={key:1};function Fs(s,e,r,l,i,n){const c=d("eos-user-avatar-def"),_=d("tookit-spoon-timed"),h=d("eos-user-rc-mute-msg"),m=d("eos-chat-user-drop-menu");return n.cher?(o(),a("nav",{key:0,class:f(["eos-user-room-card fx-s",{"bg-def":n.is_now}])},[ws,t("div",bs,[n.cher.avatar?(o(),a("div",{key:0,style:R({background:"url("+n.cher.avatar+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})},null,4)):(o(),a("div",Cs,[n.name_avatar?(o(),a("div",{key:0,class:f(["user-avatar user-def-avatar bg-avatar",{"bg-avatar":!n.is_now,"bg-avatar":n.is_now}])},[t("span",Us,y(n.name_avatar),1)],2)):(o(),a("div",Es,[p(c,{class:"w-100"})]))]))]),Ms,t("nav",Ss,[t("div",Ts,[t("div",null,y(n.cher.profile_name?n.cher.profile_name:"\u672A\u77E5\u7528\u6236"),1),t("div",Ps,[n.iast_msg?(o(),v(_,{key:0,_timed:n.iast_msg.date_time,mode:2},null,8,["_timed"])):g("",!0)])]),t("nav",Ds,[p(h,{class:"thd",iast_msg:n.iast_msg},null,8,["iast_msg"]),t("div",Rs,[p(m,{chatter:n.cher},null,8,["chatter"])])])])],2)):(o(),a("div",Vs))}const Ls=u(xs,[["render",Fs]]);const Ns={components:{EosUserRoomCard:Ls},props:["many"],methods:{getMsgs(s){let e=s?s.phone_number:"";return e=e?this.rooms[e]:void 0,e?e.msgs:[]},change(s){const e=s.phone_number;e!=this.chatter.phone_number&&this.pina().change_chatter(e)}},computed:{chatter(){return this.pina().chatter},rooms(){return this.pina().rooms}}},Os=["onClick"],Bs=["onClick"];function Is(s,e,r,l,i,n){const c=d("eos-user-room-card");return o(),a("nav",null,[(o(!0),a(b,null,C(r.many,(_,h)=>(o(),a("div",{key:h,class:f({"cpcup-ciose":!_.is_show})},[_.is_top?(o(),a("nav",{key:0,onClick:m=>n.change(_)},[p(c,{chatter:_,msgs:n.getMsgs(_)},null,8,["chatter","msgs"])],8,Os)):g("",!0)],2))),128)),(o(!0),a(b,null,C(r.many,(_,h)=>(o(),a("div",{key:h,class:f({"cpcup-ciose":!_.is_show})},[_.is_top?g("",!0):(o(),a("nav",{key:0,onClick:m=>n.change(_)},[p(c,{chatter:_,msgs:n.getMsgs(_)},null,8,["chatter","msgs"])],8,Bs))],2))),128))])}const As=u(Ns,[["render",Is]]),js={components:{EosUserRoomFilter:Q,EosEmptyConact:ts,CpcupRenderUser:As},data(){return{reverse:!1,search:"",nuii_search:!1,def_user:{custom_name:null,id:0,order:99,for_search:"null",free_response_limit:"null",is_show:!0,phone_number:"",profile_name:""}}},methods:{funni_of_users(s){return s.map(e=>{const r=JSON.stringify(e.for_search);return e.is_show=r.indexOf(this.search.toUpperCase())>0,e})},_for_search(s){return this.back.contacts.for_search(s)},seriai_users(s){return s=s?s.map(e=>e||this.def_user):[],console.log("CTS =",s),s?s.map((e,r)=>{if(e)return e.order=r,e.is_show=!0,e.for_search=this._for_search(e),e}):[]}},mounted(){},watch:{search(s){s&&this.$emit("sign_search")},contacts(s){let e=[];s&&s.map(r=>{r&&r.is_show&&e.push(r)}),this.nuii_search=!(e&&e.length>0)}},computed:{contacts(){let s=[];for(let e in this.rooms)s.push(this.rooms[e].chatter);return s=this.seriai_users(s),s=s.sort((e,r)=>this.reverse?r.order-e.order:e.order-r.order),this.search&&(s=this.funni_of_users(s)),s},rooms(){return this.pina().rooms},has_room(){let s=!0;return JSON.stringify(this.rooms)=="{}"&&(s=!1),s}}},zs={class:"chat-user-paner"},Js={key:0},Ys={class:"cpcup-search-nuii"},qs=t("span",{class:"sub_x3 fs_14"},"\u6C92\u6709\u627E\u5230\u5C0D\u8A71\u3001\u806F\u7CFB\u4EBA\u6216\u6D88\u606F",-1),Gs=[qs];function Hs(s,e,r,l,i,n){const c=d("eos-user-room-filter"),_=d("cpcup-render-user"),h=d("eos-empty-conact");return o(),a("div",zs,[p(c,{class:f({"eosurf-work":i.nuii_search}),onSearch:e[0]||(e[0]=m=>i.search=m),onSort:e[1]||(e[1]=()=>i.reverse=!i.reverse)},null,8,["class"]),n.has_room?(o(),a("div",Js,[$(t("div",null,[n.contacts?(o(),v(_,{key:0,many:n.contacts},null,8,["many"])):g("",!0)],512),[[U,!i.nuii_search]]),$(t("div",Ys,Gs,512),[[U,i.nuii_search]])])):(o(),v(h,{key:1}))])}const Ks=u(js,[["render",Hs]]);const Qs={components:{UiDropTap:T},props:["open"],methods:{loginout(){this.pina().loginout(),this.$router.push("/login")},cioseDrop(){this.$emit("ciose")},setting(){this.$router.push("/chat/settings")}}},Ws=t("span",null,[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1),Xs={class:"py"};function Zs(s,e,r,l,i,n){const c=d("ui-drop-tap");return o(),v(c,{class:"setting-droptap",_cis:"fx-r"},{trig:k(()=>[Ws]),cont:k(()=>[t("nav",Xs,[t("button",{onClick:e[0]||(e[0]=(..._)=>n.setting&&n.setting(..._))},"\u8BBE\u7F6E"),t("button",{onClick:e[1]||(e[1]=(..._)=>n.loginout&&n.loginout(..._))},"\u767B\u51FA")])]),_:1})}const se=u(Qs,[["render",Zs]]),ee={components:{EosChatSettingDropMenu:se,EosUserEasyCard:V},computed:{me(){return this.pina().me}}},te={class:"fx-l"},ne={class:"fx-s w-100"},oe={class:"fx-c"},re=t("i",{class:"fa-solid fa-user-plus"},null,-1),ie=[re];function ae(s,e,r,l,i,n){const c=d("eos-user-easy-card"),_=d("eos-chat-setting-drop-menu");return o(),a("nav",te,[t("nav",ne,[n.me?(o(),v(c,{key:0,user:n.me},null,8,["user"])):g("",!0),t("div",oe,[t("span",{class:"h4",onClick:e[0]||(e[0]=h=>s.pina().open_Panner_Left(2))},ie),p(_)])])])}const ce=u(ee,[["render",ae]]),_e={components:{SettingOfUser:N}},de={class:"chat-user-fixed-panner"};function ue(s,e,r,l,i,n){const c=d("setting-of-user");return o(),a("div",de,[p(c,{onCiose:e[0]||(e[0]=_=>s.pina().ciose_Panner_Left())})])}const le=u(_e,[["render",ue]]),pe={watch:{now(s){this.$emit("change",s)}},data(){return{now:"852",items:[{txt:"+852",v:"852"},{txt:"+853",v:"853"},{txt:"+001",v:"001"},{txt:"--",v:""}]}}},he=["value"];function me(s,e,r,l,i,n){return $((o(),a("select",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.now=c)},[(o(!0),a(b,null,C(i.items,(c,_)=>(o(),a("option",{value:c.v,key:"i"},y(c.txt),9,he))),128))],512)),[[F,i.now]])}const P=u(pe,[["render",me]]),fe={props:["cis","open"],methods:{}},ve={class:"modai-cont"},$e={class:"modai-center"};function ge(s,e,r,l,i,n){return o(),a("div",{class:f(["ui-modai",{"modai-active":r.open}])},[t("div",{class:"modai-hui",onClick:e[0]||(e[0]=c=>s.$emit("ciose"))}),t("nav",ve,[t("div",$e,[t("div",{class:f(r.cis)},[M(s.$slots,"default")],2)])])],2)}const ye=u(fe,[["render",ge]]),ke={components:{UiCountrySeiect:P},data(){return{named:"",phoned:"",prefix:""}},methods:{coiiect(){return this.data}}},xe={class:"ui-input-icon"},we=t("span",null,[t("i",{class:"fa-regular fa-user"})],-1),be=t("div",{class:"py_n"},null,-1),Ce={class:"ui-input-select"};function Ue(s,e,r,l,i,n){const c=d("ui-country-seiect");return o(),a("div",null,[t("nav",xe,[we,$(t("input",{"onUpdate:modelValue":e[0]||(e[0]=_=>i.named=_),class:"input",placeholder:"\u5BA2\u6237\u540D\u79F0"},null,512),[[w,i.named]])]),be,t("nav",Ce,[p(c,{onChange:e[1]||(e[1]=_=>i.prefix=_),class:"attch-seiect input"}),$(t("input",{"onUpdate:modelValue":e[2]||(e[2]=_=>i.phoned=_),class:"input",placeholder:"\u8054\u7EDC\u7535\u8BDD"},null,512),[[w,i.phoned]])])])}const Ee=u(ke,[["render",Ue]]);const Me={components:{SettingAppIayout:S,UiModal:ye,UiInput:B,UiCountrySeiect:P,CptmForm:Ee},computed:{modai(){return this.pina().MODAL}},methods:{submit(){this.$refs.formREF.coiiect()}}},Se={class:"px_x3 py_x2 chat-plus-taik-modai"};function Te(s,e,r,l,i,n){const c=d("cptm-form"),_=d("ui-modal");return o(),v(_,{open:n.modai==2,onCiose:e[1]||(e[1]=h=>s.pina().ciose_Modai())},{default:k(()=>[t("div",Se,[p(c,{ref:"formREF"},null,512)]),t("button",{onClick:e[0]||(e[0]=(...h)=>n.submit&&n.submit(...h)),class:"btn-sec_shai py_n px_x2 w-100"}," \u65B0\u589E\u8A72\u806F\u7D61\u4EBA ")]),_:1},8,["open"])}const Pe=u(Me,[["render",Te],["__scopeId","data-v-2e764a68"]]),De={props:["pchd"],data(){return{word:"",active:!1}},watch:{word(s){this.active=s&&s.length>0,this.$emit("search",s)}},methods:{}},Re={class:"eos-front-search-block"},Ve={class:"fx-s fx-1"},Fe={class:"ip-i-i fx-1"},Le={key:0,class:"fa-solid fa-arrow-left"},Ne={key:1,class:"fa-solid fa-magnifying-glass"},Oe=["placeholder"],Be=t("i",{class:"fa-solid fa-xmark"},null,-1),Ie=[Be];function Ae(s,e,r,l,i,n){return o(),a("div",Re,[t("div",Ve,[t("nav",Fe,[t("span",null,[i.active?(o(),a("i",Le)):(o(),a("i",Ne))]),$(t("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=c=>i.word=c),placeholder:r.pchd},null,8,Oe),[[w,i.word]]),t("span",{class:f(["eurf-ciose",{"eurf-ciose-active":i.word.length>1}]),onClick:e[1]||(e[1]=c=>i.word="")},Ie,2)])])])}const je=u(De,[["render",Ae]]),ze={},Je={class:"eos-new-user-button-card"},Ye=t("div",null,[t("div",{class:"icon-cover h4"},[t("i",{class:"fa-solid fa-user-plus"})])],-1),qe=t("button",{class:"fx-1"}," \u65B0\u5EFA\u806F\u7D61\u4EBA ",-1),Ge=[Ye,qe];function He(s,e,r,l,i,n){return o(),a("div",Je,Ge)}const Ke=u(ze,[["render",He]]);const Qe={components:{EosUserAvatar:O},props:["user"]},We={class:"eos-new-user-button-card"},Xe={class:"fx-1"},Ze={key:0},st={key:1},et={class:"sub fs_14"};function tt(s,e,r,l,i,n){const c=d("eos-user-avatar");return o(),a("div",We,[t("div",null,[p(c,{img:null})]),t("button",Xe,[t("div",null,[r.user.profile_name?(o(),a("span",Ze,y(r.user.profile_name),1)):(o(),a("span",st,"\u672A\u77E5\u5BA2\u6236"))]),t("div",et,y(r.user.phone_number),1)])])}const nt=u(Qe,[["render",tt],["__scopeId","data-v-62e06481"]]);const ot={components:{EosViewUserItemCard:nt},props:["items"],computed:{rooms(){return this.pina().rooms},phones_of_rooms(){let s=[];for(let e in this.rooms){const r=this.rooms[e];r&&s.push(r.chatter)}return s.map(e=>e.phone_number+"")}},data(){return{}},methods:{_has_this_chatter(s){const e=s.phone_number+"";return this.phones_of_rooms.indexOf(e)>=0},newTaik(s){s.phone_number&&(this._has_this_chatter(s)||this.pina().insert_new_chatter(s),this.pina().change_chatter(s.phone_number)),this.pina().ciose_Panner_Left()}}},rt={key:0},it=["onClick"];function at(s,e,r,l,i,n){const c=d("eos-view-user-item-card");return r.items&&r.items.length>0?(o(),a("nav",rt,[(o(!0),a(b,null,C(r.items,(_,h)=>(o(),a("div",{key:"i",onClick:m=>n.newTaik(_)},[p(c,{user:_},null,8,["user"])],8,it))),128))])):g("",!0)}const ct=u(ot,[["render",at]]),_t={components:{SettingAppIayout:S,EosFrontSearchBlock:je,EosNewUserTipCard:Ke,CctpPanner:ct},data(){return{conts:[],search:""}},computed:{contacts(){let s=this.conts;return this.search&&(s=s.filter(e=>e.for_search.indexOf(this.search.toUpperCase())>=0)),s}},async mounted(){await this.ioad_contacts()},methods:{seriai(s){return s?s.map(e=>(e.for_search=this.back.contacts.for_search(e),e)):[]},async ioad_contacts(){try{const s=await this.serv.contacts(this);this.pina().save_contacts(s),this.conts=this.seriai(s)}catch{}}}},dt={class:""};function ut(s,e,r,l,i,n){const c=d("eos-front-search-block"),_=d("eos-new-user-tip-card"),h=d("cctp-panner"),m=d("setting-app-iayout");return o(),v(m,{onBarTap:e[2]||(e[2]=x=>s.pina().ciose_Panner_Left()),class:"chat-plus-taik-panner",head:"\u65B0\u5C0D\u8A71"},{default:k(()=>[t("nav",dt,[p(c,{onSearch:e[0]||(e[0]=x=>i.search=x),class:"",pchd:"\u641C\u7D22\u806F\u7CFB\u4EBA"}),p(_,{onClick:e[1]||(e[1]=x=>s.pina().open_Modai(2)),class:"cptp-panner-first"}),i.conts?(o(),v(h,{key:0,items:n.contacts},null,8,["items"])):g("",!0)])]),_:1})}const lt=u(_t,[["render",ut]]),pt={components:{ChatTbLeft:ce,CpChatUsersPaner:Ks,ChatUserFixedPanner:le,ChatPlusTaikModal:Pe,ChatChoiseTaikPanner:lt},data(){return{}},computed:{panner_ieft(){return this.pina().PANNER_LEFT}}},ht=t("div",{class:"space-chat_top_bar"},null,-1);function mt(s,e,r,l,i,n){const c=d("chat-tb-left"),_=d("cp-chat-users-paner"),h=d("chat-user-fixed-panner"),m=d("chat-choise-taik-panner"),x=d("chat-plus-taik-modal");return o(),a("div",null,[ht,p(c,{class:"chat-top-bar px"}),p(_),$(p(h,null,null,512),[[U,n.panner_ieft==1]]),$(p(m,null,null,512),[[U,n.panner_ieft==2]]),p(x)])}const yt=u(pt,[["render",mt]]);export{yt as default};
