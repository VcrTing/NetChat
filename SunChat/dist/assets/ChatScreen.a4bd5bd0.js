import{_ as h,o as e,c as o,a as n,r as b,n as p,b as S,t as l,d as u,e as y,w as D,v as E,f as R,F as v,g,h as f,i as w,j as $,k as x}from"./index.bc1562ae.js";const H={props:["cis_r"]},M={class:"iayout-room fx-t"},B={class:"room-L"};function P(t,a,r,m,_,s){return e(),o("div",M,[n("div",B,[b(t.$slots,"L")]),n("div",{class:p(["room-R",r.cis_r])},[b(t.$slots,"R")],2)])}const C=h(H,[["render",P]]),T={props:["user"],computed:{name_avatar(){const t=this.user?this.user.profile_name:"";return t?t.substring(0,1):""}}},I={key:0,class:"eos-user-room-easy-card fx-s"},j={class:"user-avatar fx-c"},A={key:1,class:"user-avatar bg-avatar user-def-avatar"},F=n("span",{class:"px_s"},null,-1),L={class:"t-l fx-1 fs_s"},V={class:"fx-s op-90"},z={class:"sub"},N={key:1};function U(t,a,r,m,_,s){return r.user&&r.user.profile_name?(e(),o("nav",I,[n("div",j,[r.user.avatar?(e(),o("div",{key:0,style:S({background:"url("+r.user.avatar+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})},null,4)):(e(),o("div",A,[n("span",null,l(s.name_avatar),1)]))]),F,n("nav",L,[n("div",V,[n("div",null,l(r.user.profile_name),1)]),n("nav",z,[n("span",null,l(r.user.phone_number),1)])])])):(e(),o("div",N))}const K=h(T,[["render",U]]),O={components:{EosUserRoomEasyCard:K},computed:{me(){return this.pina().chatter}}},q={class:"fx-s"},G=n("div",null,null,-1);function J(t,a,r,m,_,s){const i=u("eos-user-room-easy-card");return e(),o("div",q,[y(i,{user:s.me},null,8,["user"]),G])}const Q=h(O,[["render",J]]),W={methods:{buiid(){return{type:"text",direction:"send",message:this.vaiid(),date_time:null}},submit(){this.$emit("send",this.buiid()),this.word=""},vaiid(){return this.word.trim().replace("\\","")}},data(){return{word:""}}},X={class:"chat-pot-input-area fx-s fx-b"},Y=n("nav",null,[n("div",null," Emoji ")],-1),Z={class:"fx-1"};function tt(t,a,r,m,_,s){return e(),o("div",X,[Y,n("div",Z,[D(n("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>_.word=i),onKeyup:a[1]||(a[1]=R(i=>s.submit(),["enter"])),placeholder:"Type in message..."},null,544),[[E,_.word]])])])}const et=h(W,[["render",tt]]),st={props:["item","type","direction"],methods:{media(){return this.item.media}},computed:{is_smaii_iong(){const t=this.item.is_iong?0:this.item.iong_minute;return t?t>2:!1},which(){switch(this.type){case"text":return 1;case"sticker":return 2;case"image":return 3;case"document":return 4;case"location":return 5;case"contacts":return 6;default:return 0}}}},ot={key:0},nt={key:0},rt={key:1},it=["src"],at=["src"],ct=n("div",null,[n("button",null,"\u6253\u5F00")],-1),_t=n("div",{class:"pb_s sus"},"\u6587\u4EF6",-1),dt={key:4},ut={key:5,class:"spoon-taii"},ht=n("span",null,"O",-1),mt=[ht];function pt(t,a,r,m,_,s){return e(),o("nav",{class:p(["msg-spoon ps-r",{"msg-spoon-me":r.direction!="receive","spoon-iong-smaii":s.is_smaii_iong,mt:s.which>1}])},[s.which<=1?(e(),o("p",ot,[r.item.message?(e(),o("span",nt,l(r.item.message),1)):(e(),o("span",rt,"\xA0"))])):s.which==2?(e(),o("div",{key:1,class:p(["spoon-emoji",{"spoon-more":s.media().length>1}])},[(e(!0),o(v,null,g(s.media(),(i,c)=>(e(),o("img",{key:c,src:t.conf.API+i.smaii},null,8,it))),128))],2)):s.which==3?(e(),o("div",{key:2,class:p(["spoon-img",{"spoon-img-more":s.media().length>1}])},[(e(!0),o(v,null,g(s.media(),(i,c)=>(e(),o("nav",{key:c,class:"spoon-img-wrapper"},[n("img",{src:t.conf.API+i.smaii},null,8,at),ct]))),128))],2)):s.which==4?(e(),o("div",{key:3,class:p(["spoon-fiie",{"spoon-fiie-more":s.media().length>=1}])},[n("p",null,[_t,(e(!0),o(v,null,g(s.media(),(i,c)=>(e(),o("a",{key:c},l(i.name),1))),128))])],2)):(e(),o("div",dt," \xA0 ")),s.which<=1||s.which==4?(e(),o("span",ut,mt)):f("",!0)],2)}const lt=h(st,[["render",pt]]),ft={props:["timed"],computed:{txt(){const t=w(this.timed);return this.is_today(t)?"\u4ECA\u5929 "+this.minute(t):this.is_oiday(t,1)?"\u6628\u5929 "+this.minute(t):this.is_oiday(t,2)?"\u524D\u5929 "+this.minute(t):this.is_oiday(t,3)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_oiday(t,4)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_oiday(t,5)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_year(t)?t.format("yy-M-D  HH:mm"):t.format("M-D  HH:mm")}},methods:{is_year(t){return t.year()<w().year()},is_oiday(t,a=0){return this.is_today(w(t).add(a,"days"))},is_today(t){return t.format("yyyy-MM-DD")==w().format("yyyy-MM-DD")},minute(t){return t.format("HH:mm")}}},yt={class:"msg-spoon-timed"};function $t(t,a,r,m,_,s){return e(),o("div",yt,[n("span",null,l(s.txt),1)])}const vt=h(ft,[["render",$t]]),gt={components:{EosChatSpoonCont:lt,EosChatSpoonTimed:vt},props:{msgs:{type:Array}},mounted(){},computed:{},methods:{}},wt={key:0},kt=n("div",{class:"msg-spoon-space"},null,-1);function bt(t,a,r,m,_,s){const i=u("eos-chat-spoon-timed"),c=u("eos-chat-spoon-cont");return r.msgs?(e(),o("div",wt,[(e(!0),o(v,null,g(r.msgs,(d,k)=>(e(),o("div",{key:k},[n("nav",null,[d.is_iong?(e(),$(i,{key:0,timed:d.date_time},null,8,["timed"])):f("",!0),d?(e(),$(c,{key:1,item:d,type:d.type,direction:d.direction},null,8,["item","type","direction"])):f("",!0)])]))),128)),kt])):f("",!0)}const xt=h(gt,[["render",bt]]),Ct={methods:{async refresh(){console.log("\u6267\u884C\u5237\u65B0"),await this.pina().refresh(this),this.$emit("sign")}}};function St(t,a,r,m,_,s){return null}const Dt=h(Ct,[["render",St]]),Et={components:{CpChatPotCont:xt,CpChatPotInputArea:et,HimRefreshMsgs:Dt},props:{chtr:{type:Object}},computed:{phoned(){const t=this.pina().chatter;return t?t.phone_number:""},words(){return this.pina().chat_ioc_words(this.chtr)},pot(){return document.getElementById("pot_"+this.$.uid)}},mounted(){this.down()},methods:{insert_words(t){this.pina().insert_words(t,this.phoned)},async say(t){this.down(),t.phone_number=this.phoned,this.insert_words(t),this.down(),await this.pina().say(this,t),await this.$refs.reREF.refresh(),this.down()},down(){setTimeout(()=>{this.pot.scrollTop=this.pot.scrollHeight},1)}}},Rt={class:"chat-pot-paner ps-r"},Ht=["id"];function Mt(t,a,r,m,_,s){const i=u("cp-chat-pot-cont"),c=u("cp-chat-pot-input-area"),d=u("him-refresh-msgs");return e(),o("div",Rt,[n("div",{id:"pot_"+t.$.uid},[s.words?(e(),$(i,{key:0,msgs:s.words},null,8,["msgs"])):f("",!0)],8,Ht),n("nav",null,[y(c,{onSend:s.say},null,8,["onSend"])]),y(d,{onSign:s.down,ref:"reREF"},null,8,["onSign"])])}const Bt=h(Et,[["render",Mt]]),Pt={components:{CpChatPotPaner:Bt,CpChatTopUserDetailBar:Q},props:["chatter"]};function Tt(t,a,r,m,_,s){const i=u("cp-chat-top-user-detail-bar"),c=u("cp-chat-pot-paner");return e(),o("div",null,[y(i,{class:"chat-top-bar px"}),y(c,{chtr:r.chatter},null,8,["chtr"])])}const It=h(Pt,[["render",Tt]]),jt={components:{RoomIayout:C,CpChatCard:It},data(){return{}},computed:{rooms(){return this.pina().rooms},rooms_convert(){let t=[];for(let a in this.rooms)t.push(a);return t},chatter_phone_number(){let t=this.pina().chatter;return t?t.phone_number:null}}},At={class:"chat_room_card_wrapper"};function Ft(t,a,r,m,_,s){const i=u("cp-chat-card"),c=u("room-iayout");return e(),$(c,null,{L:x(()=>[b(t.$slots,"default")]),R:x(()=>[n("nav",At,[(e(!0),o(v,null,g(s.rooms_convert,(d,k)=>(e(),o("div",{class:p({"chat_room_card-show":d==s.chatter_phone_number}),key:k},[d?(e(),$(i,{key:0,chatter:{phone_number:d}},null,8,["chatter"])):f("",!0)],2))),128))])]),_:3})}const Lt=h(jt,[["render",Ft]]),Vt={components:{RoomIayout:C,ChatRoom:Lt}};function zt(t,a,r,m,_,s){const i=u("router-view"),c=u("chat-room");return e(),$(c,{class:"room-page for-chat-top"},{default:x(()=>[y(i)]),_:1})}const Ut=h(Vt,[["render",zt]]);export{Ut as default};
