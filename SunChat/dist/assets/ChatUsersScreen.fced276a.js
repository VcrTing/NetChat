import{_ as l,o as r,c,a as t,b as y,n as g,d as i,k as m,g as f,t as $,E as C,e as w,f as u,i as E,v as U,F as D,r as S,h as x,p as M}from"./index.4a30bc6d.js";import{T}from"./TookitSpoonTimed.cbe87158.js";const R={props:["_cis"]},B={class:"ui-droptap ui-droptap-anime"},N={class:"droptap-inner"};function V(s,e,n,d,a,o){return r(),c("nav",B,[t("div",{class:g(["droptap-trig",n._cis])},[y(s.$slots,"trig")],2),t("div",N,[y(s.$slots,"cont")])])}const b=l(R,[["render",V]]);const z={components:{UiDropTap:b},props:["open"],methods:{cioseDrop(){this.$emit("ciose")}}},F=t("span",null,[t("i",{class:"fa-solid fa-angle-down"})],-1),L=t("nav",{class:"py"},[t("button",null,"\u5220\u9664\u5BF9\u8BDD"),t("button",null,"\u9876\u7F6E\u5BF9\u8BDD"),t("button",null,"\u6807\u8BB0\u4E3A\u672A\u8BFB")],-1);function O(s,e,n,d,a,o){const _=i("ui-drop-tap");return r(),m(_,{class:"user-room-droptap"},{trig:f(()=>[F]),cont:f(()=>[L]),_:1})}const A=l(z,[["render",O]]);const J={props:{text:{type:String}}},P={class:"thd"};function j(s,e,n,d,a,o){return r(),c("div",P,$(n.text),1)}const q=l(J,[["render",j]]);const G={components:{EosChatUserDropMenu:A,EosUserAvatarDef:C,TookitSpoonTimed:T,EosUserRcMuteMsg:q},props:["chatter","msgs"],data(){return{drop:!1}},methods:{editDrop(){this.drop=!this.drop}},computed:{cher(){return this.chatter},reciever(){return this.pina().chatter},is_now(){return this.cher?this.cher.phone_number==this.reciever.phone_number:!1},name_avatar(){const s=this.cher?this.cher.profile_name:"";return s?s.substring(0,1):""},iast_msg(){let s=this.msgs;s=s||[];let e=s.length;return e=e?e-1:0,s[e]}}},H=t("span",{class:"pl"},null,-1),I={class:"user-avatar fx-c"},K={key:1},Q={class:""},W={key:1},X=t("span",{class:"px_s"},null,-1),Y={class:"t-l fx-1"},Z={class:"fx-s"},ss={class:"fs_s sub"},es={class:"fx-s"},ts={class:"fs_s"},os={key:1};function rs(s,e,n,d,a,o){const _=i("eos-user-avatar-def"),p=i("tookit-spoon-timed"),v=i("eos-user-rc-mute-msg"),h=i("eos-chat-user-drop-menu");return o.cher?(r(),c("nav",{key:0,class:g(["eos-user-room-card fx-s",{"bg-def":o.is_now}])},[H,t("div",I,[o.cher.avatar?(r(),c("div",{key:0,style:w({background:"url("+o.cher.avatar+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})},null,4)):(r(),c("div",K,[o.name_avatar?(r(),c("div",{key:0,class:g(["user-avatar user-def-avatar bg-avatar",{"bg-avatar":!o.is_now,"bg-avatar":o.is_now}])},[t("span",Q,$(o.name_avatar),1)],2)):(r(),c("div",W,[u(_,{class:"w-100"})]))]))]),X,t("nav",Y,[t("div",Z,[t("div",null,$(o.cher.profile_name?o.cher.profile_name:"\u672A\u77E5\u7528\u6236"),1),t("div",ss,[u(p,{_timed:o.iast_msg.date_time,mode:2},null,8,["_timed"])])]),t("nav",es,[u(v,{text:o.cher.phone_number},null,8,["text"]),t("div",ts,[u(h,{open:a.drop,onCiose:o.editDrop},null,8,["open","onCiose"])])])])],2)):(r(),c("div",os))}const ns=l(G,[["render",rs]]),cs={data(){return{word:"",is_sort:!1}},watch:{word(s){this.$emit("search",s)},is_sort(s){this.$emit("sort",s)}},methods:{sort(){this.is_sort=!this.is_sort}}},as={class:"f-row eos-user-room-filter"},_s={class:"ip-i-i fx-1"},is=t("span",null,[t("i",{class:"fa-solid fa-magnifying-glass"})],-1),ds={key:0,class:"fa-solid fa-arrow-down-short-wide"},ls={key:1,class:"fa-solid fa-arrow-down-wide-short"};function ps(s,e,n,d,a,o){return r(),c("div",as,[t("nav",_s,[is,E(t("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=_=>a.word=_),placeholder:"\u641C\u7D22\u6216\u958B\u59CB\u65B0\u5C0D\u8A71"},null,512),[[U,a.word]])]),t("div",{onClick:e[1]||(e[1]=(..._)=>o.sort&&o.sort(..._)),class:"euef-btn-funni"},[a.is_sort?(r(),c("i",ls)):(r(),c("i",ds))])])}const us=l(cs,[["render",ps]]);const hs={},ms={class:"empty empty-contact fx-c t-c"},fs=t("div",null,[t("h6",{class:"pb_s"},"\u8054\u7EDC\u4EBA\u4E3A\u7A7A"),t("button",{class:"thd btn-txt-acc"},[t("i",{class:"fa-solid fa-plus"}),t("span",{class:"pl_s"},"\u5F00\u59CB\u65B0\u5BF9\u8BDD")])],-1),vs=[fs];function gs(s,e,n,d,a,o){return r(),c("div",ms,vs)}const $s=l(hs,[["render",gs]]),ys={components:{EosUserRoomCard:ns,EosUserRoomFilter:us,EosEmptyConact:$s},data(){return{reverse:!1,search:""}},methods:{searchUser(s){console.log("\u7B5B\u9009 =",s)},change(s){const e=s.phone_number;e!=this.chatter.phone_number&&this.pina().change_chatter(e)},getMsgs(s){let e=s?s.phone_number:"",n;for(let d in this.rooms)d==e&&(n=this.rooms[d].msgs);return n||[]},setOrder(s){return s.map((e,n)=>(e.order=e.order?e.order:n,e))}},mounted(){console.log(this.contacts)},computed:{users(){},rooms(){return this.pina().rooms},chatter(){return this.pina().chatter},contacts(){let s=[];for(let e in this.rooms)s.push(this.rooms[e].chatter);return s=s?s.map((e,n)=>(e.order=n,e)):[],s.sort((e,n)=>this.reverse?n.order-e.order:e.order-n.order)},has_room(){let s=!0;return JSON.stringify(this.rooms)=="{}"&&(s=!1),s}}},xs={class:"chat-user-paner"},bs={key:0},ks=["onClick"];function Cs(s,e,n,d,a,o){const _=i("eos-user-room-filter"),p=i("eos-user-room-card"),v=i("eos-empty-conact");return r(),c("div",xs,[u(_,{onSearch:o.searchUser,onSort:e[0]||(e[0]=()=>a.reverse=!a.reverse)},null,8,["onSearch"]),o.has_room?(r(),c("div",bs,[(r(!0),c(D,null,S(o.contacts,(h,k)=>(r(),c("div",{onClick:As=>o.change(h),key:k},[h?(r(),m(p,{key:0,chatter:h,msgs:o.getMsgs(h)},null,8,["chatter","msgs"])):x("",!0)],8,ks))),128))])):(r(),m(v,{key:1}))])}const ws=l(ys,[["render",Cs]]);const Es={components:{UiDropTap:b},props:["open"],methods:{loginout(){this.pina().loginout(),this.$router.push("/login")},cioseDrop(){this.$emit("ciose")}}},Us=t("span",null,[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1),Ds={class:"py"};function Ss(s,e,n,d,a,o){const _=i("ui-drop-tap");return r(),m(_,{class:"setting-droptap",_cis:"fx-r"},{trig:f(()=>[Us]),cont:f(()=>[t("nav",Ds,[t("button",{onClick:e[0]||(e[0]=(...p)=>o.loginout&&o.loginout(...p))},"\u767B\u51FA")])]),_:1})}const Ms=l(Es,[["render",Ss]]),Ts={components:{EosChatSettingDropMenu:Ms,EosUserEasyCard:M},computed:{me(){return this.pina().me}}},Rs={class:"fx-l"},Bs={class:"fx-s w-100"},Ns={class:"fx-c"};function Vs(s,e,n,d,a,o){const _=i("eos-user-easy-card"),p=i("eos-chat-setting-drop-menu");return r(),c("nav",Rs,[t("nav",Bs,[o.me?(r(),m(_,{key:0,user:o.me},null,8,["user"])):x("",!0),t("div",Ns,[u(p)])])])}const zs=l(Ts,[["render",Vs]]),Fs={components:{ChatTbLeft:zs,CpChatUsersPaner:ws}},Ls=t("div",{class:"space-chat_top_bar"},null,-1);function Os(s,e,n,d,a,o){const _=i("chat-tb-left"),p=i("cp-chat-users-paner");return r(),c("div",null,[Ls,u(_,{class:"chat-top-bar px"}),u(p)])}const js=l(Fs,[["render",Os]]);export{js as default};
