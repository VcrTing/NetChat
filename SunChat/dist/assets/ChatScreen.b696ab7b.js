import{_ as d,o,c,a as s,r as g,n as x,b as S,t as $,d as _,e as m,w as D,v as E,f as R,h as f,F as b,g as k,i as l,j as y,k as w}from"./index.1445f179.js";const H={props:["cis_r"]},M={class:"iayout-room fx-t"},B={class:"room-L"};function T(t,r,e,u,i,n){return o(),c("div",M,[s("div",B,[g(t.$slots,"L")]),s("div",{class:x(["room-R",e.cis_r])},[g(t.$slots,"R")],2)])}const C=d(H,[["render",T]]),F={props:["user"]},L={key:0,class:"eos-user-room-easy-card fx-s"},P={class:"user-avatar fx-c"},V={key:1,class:"user-avatar bg-avatar"},j=s("span",{class:"px_s"},null,-1),z={class:"t-l fx-1 fs_s"},I={class:"fx-s op-90"},N={class:"sub"},U={key:1};function A(t,r,e,u,i,n){return e.user&&e.user.profile_name?(o(),c("nav",L,[s("div",P,[e.user.avatar?(o(),c("div",{key:0,style:S({background:"url("+e.user.avatar+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})},null,4)):(o(),c("div",V))]),j,s("nav",z,[s("div",I,[s("div",null,$(e.user.profile_name),1)]),s("nav",N,[s("span",null,$(e.user.phone_number),1)])])])):(o(),c("div",U))}const K=d(F,[["render",A]]),O={components:{EosUserRoomEasyCard:K},computed:{me(){return this.pina().chatter}}},q={class:"fx-s"},G=s("div",null,null,-1);function J(t,r,e,u,i,n){const a=_("eos-user-room-easy-card");return o(),c("div",q,[m(a,{user:n.me},null,8,["user"]),G])}const Q=d(O,[["render",J]]),W={methods:{buiid(){return{type:"text",message:this.vaiid()}},submit(){this.$emit("send",this.buiid()),this.word=""},vaiid(){return this.word.trim().replace("\\","")}},data(){return{word:""}}},X={class:"chat-pot-input-area fx-s fx-b"},Y=s("nav",null,[s("div",null," Emoji ")],-1),Z={class:"fx-1"};function tt(t,r,e,u,i,n){return o(),c("div",X,[Y,s("div",Z,[D(s("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>i.word=a),onKeyup:r[1]||(r[1]=R(a=>n.submit(),["enter"])),placeholder:"Type in message..."},null,544),[[E,i.word]])])])}const et=d(W,[["render",tt]]),st={props:["cont","type","direction"]};function ot(t,r,e,u,i,n){return o(),c("div",{class:x(["msg-spoon",{"msg-spoon-me":e.direction!="receive"}])},[s("p",null,$(e.cont),1)],2)}const nt=d(st,[["render",ot]]),rt={props:["timed"],computed:{txt(){const t=f(this.timed);return this.is_today(t)?"\u4ECA\u5929 "+this.minute(t):this.is_oiday(t,1)?"\u6628\u5929 "+this.minute(t):this.is_oiday(t,2)?"\u524D\u5929 "+this.minute(t):this.is_oiday(t,3)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_oiday(t,4)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_oiday(t,5)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_year(t)?t.format("yy-M-D  HH:mm"):t.format("M-D  HH:mm")}},methods:{is_year(t){return t.year()<f().year()},is_oiday(t,r=0){return this.is_today(f(t).add(r,"days"))},is_today(t){return t.format("yyyy-MM-DD")==f().format("yyyy-MM-DD")},minute(t){return t.format("HH:mm")}}},ct={class:"msg-spoon-timed"};function at(t,r,e,u,i,n){return o(),c("div",ct,[s("span",null,$(n.txt),1)])}const it=d(rt,[["render",at]]),_t={components:{EosChatSpoonCont:nt,EosChatSpoonTimed:it},props:{msgs:{type:Array}},mounted(){},computed:{},methods:{}},dt={key:0},ut=s("div",{class:"msg-spoon-space"},null,-1);function pt(t,r,e,u,i,n){const a=_("eos-chat-spoon-timed"),h=_("eos-chat-spoon-cont");return e.msgs?(o(),c("div",dt,[(o(!0),c(b,null,k(e.msgs,(p,v)=>(o(),c("div",{key:v},[s("nav",null,[p.is_iong?(o(),l(a,{key:0,timed:p.date_time},null,8,["timed"])):y("",!0),m(h,{type:p.type,cont:p.message,direction:p.direction},null,8,["type","cont","direction"])])]))),128)),ut])):y("",!0)}const ht=d(_t,[["render",pt]]),mt={methods:{async refresh(){console.log("\u6267\u884C\u5237\u65B0"),await this.pina().refresh(this),this.$emit("sign")}}};function lt(t,r,e,u,i,n){return null}const ft=d(mt,[["render",lt]]),$t={components:{CpChatPotCont:ht,CpChatPotInputArea:et,HimRefreshMsgs:ft},props:{chtr:{type:Object}},computed:{receiver(){return this.pina().chatter},words(){return this.pina().chat_ioc_words(this.chtr)},pot(){return document.getElementById("pot_"+this.$.uid)}},mounted(){this.down()},methods:{async say(t){t.phone_number=this.receiver.phone_number,await this.pina().say(this,t),this.down(),await this.$refs.reREF.refresh()},down(){setTimeout(()=>{this.pot.scrollTop=this.pot.scrollHeight},1)}}},yt={class:"chat-pot-paner ps-r"},vt=["id"];function gt(t,r,e,u,i,n){const a=_("cp-chat-pot-cont"),h=_("cp-chat-pot-input-area"),p=_("him-refresh-msgs");return o(),c("div",yt,[s("div",{id:"pot_"+t.$.uid},[n.words?(o(),l(a,{key:0,msgs:n.words},null,8,["msgs"])):y("",!0)],8,vt),s("nav",null,[m(h,{onSend:n.say},null,8,["onSend"])]),m(p,{onSign:n.down,ref:"reREF"},null,8,["onSign"])])}const wt=d($t,[["render",gt]]),xt={components:{CpChatPotPaner:wt,CpChatTopUserDetailBar:Q},props:["chatter"]};function bt(t,r,e,u,i,n){const a=_("cp-chat-top-user-detail-bar"),h=_("cp-chat-pot-paner");return o(),c("div",null,[m(a,{class:"chat-top-bar px"}),m(h,{chtr:e.chatter},null,8,["chtr"])])}const kt=d(xt,[["render",bt]]),Ct={components:{RoomIayout:C,CpChatCard:kt},data(){return{}},computed:{rooms(){return this.pina().rooms},rooms_convert(){let t=[];for(let r in this.rooms)t.push(r);return t},chatter_phone_number(){let t=this.pina().chatter;return t?t.phone_number:null}}},St={class:"chat_room_card_wrapper"};function Dt(t,r,e,u,i,n){const a=_("cp-chat-card"),h=_("room-iayout");return o(),l(h,null,{L:w(()=>[g(t.$slots,"default")]),R:w(()=>[s("nav",St,[(o(!0),c(b,null,k(n.rooms_convert,(p,v)=>(o(),c("div",{class:x({"chat_room_card-show":p==n.chatter_phone_number}),key:v},[p?(o(),l(a,{key:0,chatter:{phone_number:p}},null,8,["chatter"])):y("",!0)],2))),128))])]),_:3})}const Et=d(Ct,[["render",Dt]]),Rt={components:{RoomIayout:C,ChatRoom:Et}};function Ht(t,r,e,u,i,n){const a=_("router-view"),h=_("chat-room");return o(),l(h,{class:"room-page for-chat-top"},{default:w(()=>[m(a)]),_:1})}const Bt=d(Rt,[["render",Ht]]);export{Bt as default};
