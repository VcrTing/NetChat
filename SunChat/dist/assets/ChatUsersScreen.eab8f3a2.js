import{_ as l,o as r,c,a as o,b as y,n as g,d as i,l as m,g as v,t as $,E as w,e as E,f as p,h as x,i as b,v as U,F as S,r as D,q as M,s as T}from"./index.a7b0795f.js";import{T as N}from"./TookitSpoonTimed.3acf7632.js";import{S as R}from"./SettingOfUser.6b992b8d.js";const F={props:["_cis"]},B={class:"ui-droptap ui-droptap-anime"},V={class:"droptap-inner"};function z(s,e,n,d,_,t){return r(),c("nav",B,[o("div",{class:g(["droptap-trig",n._cis])},[y(s.$slots,"trig")],2),o("div",V,[y(s.$slots,"cont")])])}const k=l(F,[["render",z]]);const L={components:{UiDropTap:k},props:["open"],methods:{cioseDrop(){this.$emit("ciose")}}},O=o("span",null,[o("i",{class:"fa-solid fa-angle-down"})],-1),P=o("nav",{class:"py"},[o("button",null,"\u5220\u9664\u5BF9\u8BDD"),o("button",null,"\u9876\u7F6E\u5BF9\u8BDD"),o("button",null,"\u6807\u8BB0\u4E3A\u672A\u8BFB")],-1);function A(s,e,n,d,_,t){const a=i("ui-drop-tap");return r(),m(a,{class:"user-room-droptap"},{trig:v(()=>[O]),cont:v(()=>[P]),_:1})}const q=l(L,[["render",A]]);const J={props:{text:{type:String}}},j={class:"thd"};function G(s,e,n,d,_,t){return r(),c("div",j,$(n.text),1)}const H=l(J,[["render",G]]);const I={components:{EosChatUserDropMenu:q,EosUserAvatarDef:w,TookitSpoonTimed:N,EosUserRcMuteMsg:H},props:["chatter","msgs"],data(){return{drop:!1}},methods:{editDrop(){this.drop=!this.drop}},computed:{cher(){return this.chatter},reciever(){return this.pina().chatter},is_now(){return this.cher?this.cher.phone_number==this.reciever.phone_number:!1},name_avatar(){const s=this.cher?this.cher.profile_name:"";return s?s.substring(0,1):""},iast_msg(){let s=this.msgs;s=s||[];let e=s.length;return e=e?e-1:0,s=s?s[e]:null,s}}},K=o("span",{class:"pl"},null,-1),Q={class:"user-avatar fx-c"},W={key:1},X={class:""},Y={key:1},Z=o("span",{class:"px_s"},null,-1),ss={class:"t-l fx-1"},es={class:"fx-s"},ts={class:"fs_s sub"},os={class:"fx-s"},rs={class:"fs_s"},ns={key:1};function cs(s,e,n,d,_,t){const a=i("eos-user-avatar-def"),u=i("tookit-spoon-timed"),f=i("eos-user-rc-mute-msg"),h=i("eos-chat-user-drop-menu");return t.cher?(r(),c("nav",{key:0,class:g(["eos-user-room-card fx-s",{"bg-def":t.is_now}])},[K,o("div",Q,[t.cher.avatar?(r(),c("div",{key:0,style:E({background:"url("+t.cher.avatar+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})},null,4)):(r(),c("div",W,[t.name_avatar?(r(),c("div",{key:0,class:g(["user-avatar user-def-avatar bg-avatar",{"bg-avatar":!t.is_now,"bg-avatar":t.is_now}])},[o("span",X,$(t.name_avatar),1)],2)):(r(),c("div",Y,[p(a,{class:"w-100"})]))]))]),Z,o("nav",ss,[o("div",es,[o("div",null,$(t.cher.profile_name?t.cher.profile_name:"\u672A\u77E5\u7528\u6236"),1),o("div",ts,[t.iast_msg?(r(),m(u,{key:0,_timed:t.iast_msg.date_time,mode:2},null,8,["_timed"])):x("",!0)])]),o("nav",os,[p(f,{text:t.cher.phone_number},null,8,["text"]),o("div",rs,[p(h,{open:_.drop,onCiose:t.editDrop},null,8,["open","onCiose"])])])])],2)):(r(),c("div",ns))}const as=l(I,[["render",cs]]),_s={data(){return{word:"",is_sort:!1}},watch:{word(s){this.$emit("search",s)},is_sort(s){this.$emit("sort",s)}},methods:{sort(){this.is_sort=!this.is_sort}}},is={class:"f-row eos-user-room-filter"},ds={class:"ip-i-i fx-1"},us=o("span",null,[o("i",{class:"fa-solid fa-magnifying-glass"})],-1),ls={key:0,class:"fa-solid fa-arrow-down-short-wide"},ps={key:1,class:"fa-solid fa-arrow-down-wide-short"};function hs(s,e,n,d,_,t){return r(),c("div",is,[o("nav",ds,[us,b(o("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=a=>_.word=a),placeholder:"\u641C\u7D22\u6216\u958B\u59CB\u65B0\u5C0D\u8A71"},null,512),[[U,_.word]])]),o("div",{onClick:e[1]||(e[1]=(...a)=>t.sort&&t.sort(...a)),class:"euef-btn-funni"},[_.is_sort?(r(),c("i",ps)):(r(),c("i",ls))])])}const ms=l(_s,[["render",hs]]);const fs={},vs={class:"empty empty-contact fx-c t-c"},gs=o("div",null,[o("h6",{class:"pb_s"},"\u8054\u7EDC\u4EBA\u4E3A\u7A7A"),o("button",{class:"thd btn-txt-acc"},[o("i",{class:"fa-solid fa-plus"}),o("span",{class:"pl_s"},"\u5F00\u59CB\u65B0\u5BF9\u8BDD")])],-1),$s=[gs];function xs(s,e,n,d,_,t){return r(),c("div",vs,$s)}const ys=l(fs,[["render",xs]]),bs={components:{EosUserRoomCard:as,EosUserRoomFilter:ms,EosEmptyConact:ys},data(){return{reverse:!1,search:""}},methods:{searchUser(s){console.log("\u7B5B\u9009 =",s)},change(s){const e=s.phone_number;e!=this.chatter.phone_number&&this.pina().change_chatter(e)},getMsgs(s){let e=s?s.phone_number:"",n;for(let d in this.rooms)d==e&&(n=this.rooms[d].msgs);return n||[]},setOrder(s){return s.map((e,n)=>(e.order=e.order?e.order:n,e))}},mounted(){console.log(this.contacts)},computed:{users(){},rooms(){return this.pina().rooms},chatter(){return this.pina().chatter},contacts(){let s=[];for(let e in this.rooms)s.push(this.rooms[e].chatter);return s=s?s.map((e,n)=>(e.order=n,e)):[],s.sort((e,n)=>this.reverse?n.order-e.order:e.order-n.order)},has_room(){let s=!0;return JSON.stringify(this.rooms)=="{}"&&(s=!1),s}}},ks={class:"chat-user-paner"},Cs={key:0},ws=["onClick"];function Es(s,e,n,d,_,t){const a=i("eos-user-room-filter"),u=i("eos-user-room-card"),f=i("eos-empty-conact");return r(),c("div",ks,[p(a,{onSearch:t.searchUser,onSort:e[0]||(e[0]=()=>_.reverse=!_.reverse)},null,8,["onSearch"]),t.has_room?(r(),c("div",Cs,[(r(!0),c(S,null,D(t.contacts,(h,C)=>(r(),c("div",{onClick:Hs=>t.change(h),key:C},[h?(r(),m(u,{key:0,chatter:h,msgs:t.getMsgs(h)},null,8,["chatter","msgs"])):x("",!0)],8,ws))),128))])):(r(),m(f,{key:1}))])}const Us=l(bs,[["render",Es]]);const Ss={components:{UiDropTap:k},props:["open"],methods:{loginout(){this.pina().loginout(),this.$router.push("/login")},cioseDrop(){this.$emit("ciose")},setting(){this.$router.push("/chat/settings")}}},Ds=o("span",null,[o("i",{class:"fa-solid fa-ellipsis-vertical"})],-1),Ms={class:"py"};function Ts(s,e,n,d,_,t){const a=i("ui-drop-tap");return r(),m(a,{class:"setting-droptap",_cis:"fx-r"},{trig:v(()=>[Ds]),cont:v(()=>[o("nav",Ms,[o("button",{onClick:e[0]||(e[0]=(...u)=>t.setting&&t.setting(...u))},"\u8BBE\u7F6E"),o("button",{onClick:e[1]||(e[1]=(...u)=>t.loginout&&t.loginout(...u))},"\u767B\u51FA")])]),_:1})}const Ns=l(Ss,[["render",Ts]]),Rs={components:{EosChatSettingDropMenu:Ns,EosUserEasyCard:M},computed:{me(){return this.pina().me}}},Fs={class:"fx-l"},Bs={class:"fx-s w-100"},Vs={class:"fx-c"};function zs(s,e,n,d,_,t){const a=i("eos-user-easy-card"),u=i("eos-chat-setting-drop-menu");return r(),c("nav",Fs,[o("nav",Bs,[t.me?(r(),m(a,{key:0,user:t.me},null,8,["user"])):x("",!0),o("div",Vs,[p(u)])])])}const Ls=l(Rs,[["render",zs]]),Os={components:{SettingOfUser:R}},Ps={class:"chat-user-fixed-panner"};function As(s,e,n,d,_,t){const a=i("setting-of-user");return r(),c("div",Ps,[p(a)])}const qs=l(Os,[["render",As]]),Js={components:{ChatTbLeft:Ls,CpChatUsersPaner:Us,ChatUserFixedPanner:qs},data(){return{}},computed:{is_fixed(){return this.pina().PANNER_LEFT==1}}},js=o("div",{class:"space-chat_top_bar"},null,-1);function Gs(s,e,n,d,_,t){const a=i("chat-tb-left"),u=i("cp-chat-users-paner"),f=i("chat-user-fixed-panner");return r(),c("div",null,[js,p(a,{class:"chat-top-bar px"}),p(u),b(p(f,null,null,512),[[T,t.is_fixed]])])}const Ws=l(Js,[["render",Gs]]);export{Ws as default};
