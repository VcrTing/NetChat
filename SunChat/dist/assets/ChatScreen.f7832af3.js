import{_ as h,o as s,c as o,a as n,r as b,n as l,b as D,t as p,d,e as y,w as E,v as F,f as S,F as g,g as v,h as f,i as w,j as $,k as C}from"./index.706f447b.js";const R={props:["cis_r"]},A={class:"iayout-room fx-t"},H={class:"room-L"};function M(t,i,r,m,_,e){return s(),o("div",A,[n("div",H,[b(t.$slots,"L")]),n("div",{class:l(["room-R",r.cis_r])},[b(t.$slots,"R")],2)])}const x=h(R,[["render",M]]),j={props:["user"],computed:{name_avatar(){const t=this.user?this.user.profile_name:"";return t?t.substring(0,1):""}}},B={key:0,class:"eos-user-room-easy-card fx-s"},P={class:"user-avatar fx-c"},T={key:1,class:"user-avatar bg-avatar user-def-avatar"},I=n("span",{class:"px_s"},null,-1),L={class:"t-l fx-1 fs_s"},V={class:"fx-s op-90"},z={class:"sub"},N={key:1};function U(t,i,r,m,_,e){return r.user&&r.user.profile_name?(s(),o("nav",B,[n("div",P,[r.user.avatar?(s(),o("div",{key:0,style:D({background:"url("+r.user.avatar+")","background-size":"cover","background-repeat":"no-repeat","background-position":"center"})},null,4)):(s(),o("div",T,[n("span",null,p(e.name_avatar),1)]))]),I,n("nav",L,[n("div",V,[n("div",null,p(r.user.profile_name),1)]),n("nav",z,[n("span",null,p(r.user.phone_number),1)])])])):(s(),o("div",N))}const K=h(j,[["render",U]]),O={components:{EosUserRoomEasyCard:K},computed:{me(){return this.pina().chatter}}},q={class:"fx-s"},G=n("div",null,null,-1);function J(t,i,r,m,_,e){const a=d("eos-user-room-easy-card");return s(),o("div",q,[y(a,{user:e.me},null,8,["user"]),G])}const Q=h(O,[["render",J]]),W={methods:{buiid(){return{type:"text",direction:"send",message:this.vaiid(),date_time:null}},submit(){this.$emit("send",this.buiid()),this.word=""},vaiid(){return this.word.trim().replace("\\","")}},data(){return{word:""}}},X={class:"chat-pot-input-area fx-s fx-b"},Y=n("nav",null,[n("div",null," Emoji ")],-1),Z={class:"fx-1"};function tt(t,i,r,m,_,e){return s(),o("div",X,[Y,n("div",Z,[E(n("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>_.word=a),onKeyup:i[1]||(i[1]=S(a=>e.submit(),["enter"])),placeholder:"Type in message..."},null,544),[[F,_.word]])])])}const et=h(W,[["render",tt]]),st={props:["item","type","direction"],methods:{media(){return this.item.media},is_one_emoji(t){let i=!1;return t&&t.length>2?!1:(i=/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/ig.test(t),i&&console.log(t),i)}},computed:{is_smaii_iong(){const t=this.item.is_iong?0:this.item.iong_minute;return t?t>2:!1},which(){switch(this.type){case"text":return 1;case"sticker":return 2;case"image":return 3;case"document":return 4;case"location":return 5;case"contacts":return 6;default:return 0}}}},ot={key:0},nt={key:1},rt=["src"],it=["src"],at=n("div",null,[n("button",null,"\u6253\u5F00")],-1),ct=n("div",{class:"pb_s sus"},"\u6587\u4EF6",-1),_t={key:4},ut={key:5,class:"spoon-taii"},dt=n("span",null,"O",-1),ht=[dt];function mt(t,i,r,m,_,e){return s(),o("nav",{class:l(["msg-spoon ps-r",{"msg-spoon-me":r.direction!="receive","spoon-iong-smaii":e.is_smaii_iong,mt:e.which>1}])},[e.which<=1?(s(),o("p",{key:0,class:l({"spoon-one-emoji":e.is_one_emoji(r.item.message)})},[r.item.message?(s(),o("span",ot,p(r.item.message),1)):(s(),o("span",nt,"\xA0"))],2)):e.which==2?(s(),o("div",{key:1,class:l(["spoon-emoji",{"spoon-more":e.media().length>1}])},[(s(!0),o(g,null,v(e.media(),(a,c)=>(s(),o("img",{key:c,src:t.conf.API+a.smaii},null,8,rt))),128))],2)):e.which==3?(s(),o("div",{key:2,class:l(["spoon-img",{"spoon-img-more":e.media().length>1}])},[(s(!0),o(g,null,v(e.media(),(a,c)=>(s(),o("nav",{key:c,class:"spoon-img-wrapper"},[n("img",{src:t.conf.API+a.smaii},null,8,it),at]))),128))],2)):e.which==4?(s(),o("div",{key:3,class:l(["spoon-fiie",{"spoon-fiie-more":e.media().length>=1}])},[n("p",null,[ct,(s(!0),o(g,null,v(e.media(),(a,c)=>(s(),o("a",{key:c},p(a.name),1))),128))])],2)):(s(),o("div",_t," \xA0 ")),e.which<=1||e.which==4?(s(),o("span",ut,ht)):f("",!0)],2)}const lt=h(st,[["render",mt]]),pt={props:["timed"],computed:{txt(){const t=w(this.timed);return this.is_today(t)?"\u4ECA\u5929 "+this.minute(t):this.is_oiday(t,1)?"\u6628\u5929 "+this.minute(t):this.is_oiday(t,2)?"\u524D\u5929 "+this.minute(t):this.is_oiday(t,3)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_oiday(t,4)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_oiday(t,5)?this.tooi_time.week_word(t)+" "+this.minute(t):this.is_year(t)?t.format("yy-M-D  HH:mm"):t.format("M-D  HH:mm")}},methods:{is_year(t){return t.year()<w().year()},is_oiday(t,i=0){return this.is_today(w(t).add(i,"days"))},is_today(t){return t.format("yyyy-MM-DD")==w().format("yyyy-MM-DD")},minute(t){return t.format("HH:mm")}}},ft={class:"msg-spoon-timed"};function yt(t,i,r,m,_,e){return s(),o("div",ft,[n("span",null,p(e.txt),1)])}const $t=h(pt,[["render",yt]]),gt={components:{EosChatSpoonCont:lt,EosChatSpoonTimed:$t},props:{msgs:{type:Array}},mounted(){},computed:{},methods:{}},vt={key:0},wt=n("div",{class:"msg-spoon-space"},null,-1);function kt(t,i,r,m,_,e){const a=d("eos-chat-spoon-timed"),c=d("eos-chat-spoon-cont");return r.msgs?(s(),o("div",vt,[(s(!0),o(g,null,v(r.msgs,(u,k)=>(s(),o("div",{key:k},[n("nav",null,[u.is_iong?(s(),$(a,{key:0,timed:u.date_time},null,8,["timed"])):f("",!0),u?(s(),$(c,{key:1,item:u,type:u.type,direction:u.direction},null,8,["item","type","direction"])):f("",!0)])]))),128)),wt])):f("",!0)}const bt=h(gt,[["render",kt]]),Ct={methods:{async refresh(){console.log("\u6267\u884C\u5237\u65B0"),await this.pina().refresh(this),this.$emit("sign")}}};function xt(t,i,r,m,_,e){return null}const Dt=h(Ct,[["render",xt]]),Et={components:{CpChatPotCont:bt,CpChatPotInputArea:et,HimRefreshMsgs:Dt},props:{chtr:{type:Object}},computed:{phoned(){const t=this.pina().chatter;return t?t.phone_number:""},words(){return this.pina().chat_ioc_words(this.chtr)},pot(){return document.getElementById("pot_"+this.$.uid)}},mounted(){this.down()},methods:{insert_words(t){this.pina().insert_words(t,this.phoned)},async say(t){this.down(),t.phone_number=this.phoned,this.insert_words(t),this.down(),await this.pina().say(this,t),await this.$refs.reREF.refresh(),this.down()},down(){setTimeout(()=>{this.pot.scrollTop=this.pot.scrollHeight},1)}}},Ft={class:"chat-pot-paner ps-r"},St=["id"];function Rt(t,i,r,m,_,e){const a=d("cp-chat-pot-cont"),c=d("cp-chat-pot-input-area"),u=d("him-refresh-msgs");return s(),o("div",Ft,[n("div",{id:"pot_"+t.$.uid},[e.words?(s(),$(a,{key:0,msgs:e.words},null,8,["msgs"])):f("",!0)],8,St),n("nav",null,[y(c,{onSend:e.say},null,8,["onSend"])]),y(u,{onSign:e.down,ref:"reREF"},null,8,["onSign"])])}const At=h(Et,[["render",Rt]]),Ht={components:{CpChatPotPaner:At,CpChatTopUserDetailBar:Q},props:["chatter"]};function Mt(t,i,r,m,_,e){const a=d("cp-chat-top-user-detail-bar"),c=d("cp-chat-pot-paner");return s(),o("div",null,[y(a,{class:"chat-top-bar px"}),y(c,{chtr:r.chatter},null,8,["chtr"])])}const jt=h(Ht,[["render",Mt]]),Bt={components:{RoomIayout:x,CpChatCard:jt},data(){return{}},computed:{rooms(){return this.pina().rooms},rooms_convert(){let t=[];for(let i in this.rooms)t.push(i);return t},chatter_phone_number(){let t=this.pina().chatter;return t?t.phone_number:null}}},Pt={class:"chat_room_card_wrapper"};function Tt(t,i,r,m,_,e){const a=d("cp-chat-card"),c=d("room-iayout");return s(),$(c,null,{L:C(()=>[b(t.$slots,"default")]),R:C(()=>[n("nav",Pt,[(s(!0),o(g,null,v(e.rooms_convert,(u,k)=>(s(),o("div",{class:l({"chat_room_card-show":u==e.chatter_phone_number}),key:k},[u?(s(),$(a,{key:0,chatter:{phone_number:u}},null,8,["chatter"])):f("",!0)],2))),128))])]),_:3})}const It=h(Bt,[["render",Tt]]),Lt={components:{RoomIayout:x,ChatRoom:It}};function Vt(t,i,r,m,_,e){const a=d("router-view"),c=d("chat-room");return s(),$(c,{class:"room-page for-chat-top"},{default:C(()=>[y(a)]),_:1})}const Nt=h(Lt,[["render",Vt]]);export{Nt as default};
